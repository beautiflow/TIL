< TCP/IP >



# 05. 컴퓨터 네트워크와 계층 모델

: 컴퓨터 네트워크는 여러 개의 통신 계층이 조합된 형티로 구성된다.

* 계층 모델
  - 애플리케이션 계층 : 웹서비스, 이메일과 같은 서비스를 사용자에게 제공한다.
  - 트랜스포트 계층 : 애플리케이션 계층과 인터넷 계층 사이에서 데이터가 올바르게 전달되도록 중계한다.
  - 인터넷 계층 : 목적지의 IP 어드레스로 데이터를 전달한다.
  - 네트워크 인터페이스 계층 : 네트워크와 같은 하드웨어를 통해 데이터를 전달한다.

서비스를 제공하는 부분 : 애플리케이션 계층
통신기능을 담당하는 부분 : 트랜스포트계층, 인터넷 계층, 네트워크 인터페이스 계층

* 송신지
  - 애플리케이션 계층 : 한 계층만 보면 같은 계층끼리 데이터를 주고받은 것처럼 보인다.
  - 트랜스포트 계층 : 전송하기에 적합한 크기로 작게 쪼갠 후, 목적지의 프로그램을 식별할 수 있는 정보를 덧붙인다.
  - 인터넷 계층 : 수신측의 컴퓨터를 식별할 수 있는 정보를 덧붙인다.
  - 네트워크 인터페이스 계층 : 하드웨어에 신호를 전달하는 데 필요한 정보를 덧붙인다.

* 하드웨어를 통과하는 데이터의 형태  
  - 네트워크 인터페이스 계층의 헤더 : 유선 LAN에서 데이터를 보내는 데 필요한 정보
  - 인터넷계층의 헤더 : 목적지의 컴퓨터를 식별할 수 있는 번호
  - 트랜스 포트 계층의 헤더 : 데이터의 결합 순서와 이 데이터를 받을 프로그램을 식별할 수 있는 번호
  - 패킷의 실제 몸통에 해당하는 데이터 (작게 분할된 데이터)
  - 네트워크 인터페이스 계층의 트레일러

* 수신지
  - 애플리케이션 계층 : 수신된 데이터
  - 트랜스포트 계층 : 모든 데이터가 수신된 것을 확인하고 데이터들이 결합되면 목적지의 프로그램에게 전달된다.
  - 인터넷 계층 : 자신이 수신해야 하는 데이터라고 판단되면 이 데이터를 트랜스포트 계층으로 전달한다.
  - 네트워크 인터페이스 계층 : 헤더나 트레일러를 떼어내고 인터넷 계층으로 전달한다.

@ 헤더 : 데이터 앞에 덧붙이는 정보
@ 트레일러 : 뒤에 덧붙이는 정보

# 06 4개 계층의 동작방식

* 애플리케이션 계층 : 사용자가 실제로 체감할 수 있는 서비스를 제공하는 것
    예를 들어, 웹 브라우저와 웹 서버는 애플리케이션 계층에 속하는 프로그램이고, 이때 주고받은 데이터는 페이지를 요청하는 URL과 그 응답 결과로 전달되는 웹 페이지 데이터

    1. 보고싶은 웹페이지의 URL을 요청
    2. 웹 페이지의 HTML 데이터를 응답
    3. 응답으로 받은 HTML데이터를 해석하여 웹 페이지 형태로 표시

=> 데이터의 내용을 보고 그에 맞는 서비스를 처리하는 데 집중하고 데이터 전송에 대해서는 하위 계층에 위임함

* 트랜스포트 계층 : 애플리케이션 계층의 프로그램에서 전달받은 데이터를 목적지 애플리케이션 계층의 프로그램까지 전달하는 것
                데이터가 제대로 전달되지 않았을 때 재전송하는 것도 이 계층이 하는 일

    1. 어떤 프로그램들이 서로 통신을 해야하는 지에 대한 정보를 헤더에 기록
    2. 포트 번호를 확인하고 웨 서버에 데이터를 전달
    3. 요청을 보낸 프로그램을 목적지로 설정하여 응답 데이터를 전달

=> 목적지 컴퓨터의 프로그램에 데이터가 제대로 전달되도록 포트 번호 정보를 헤더에 붙이거나 떼어내는 일을 주로 함

* 인터넷 계층 : 데이터에 어드레스 정보를 덧붙여 목적지까지 무사히 전달하는 것
             인터넷 통신에서는 목적지 컴퓨터까지 도달할 수 있는 경로를 창아야 하는데, 이때 라우터라는 장비가 사용됨

    1. 통신하는 컴퓨터들을 식별할 수 있도록 어드레스 정보를 덧붙인다.
    2. 자신이 수신해야 하는 데이터라고 판단되면 트랜스포트 계층에 데이터를 전달한다
    3. 클라이언트 PC를 목적지로 설정하여 데이터를 전달한다
    4. 자신이 수신해야하는 데이터라고 판단되면 트랜스포트 계층에 데이터를 전달한다.

=> 인터넷에서 통신을 할때는 이어달리기를 하는 것처럼 데이터를 다음 네트워크로 전달하기 위해 라우터라는 장비를 사용함

      cf) 하드웨어 : 어드레스 정보를 보고 목적지로 데이터를 전달함

* 네트워크 인터페이스 계층 : 유선 LAN 어댑터나 무선 LAN 어댑터가 처리할 수 있는 형태로 데이터를 변환하고 이 데이터를 목적지까지 전달하는것 
                       물리적으로 인접하여 견결된 장비까지 어떻게 하면 데이터를 잘 전달할까에 초점을 맞춤

    1. 주변 장치까지 데이터를 전달하는 데 필요한 정보를 덧붙인다.
    2. 자신이 수신해야 하는 데이터라고 판단되면 인터넷 계층에 데이터를 전달한다
    3. 주변 장치까지 데이터를 전달하는 데 필요한 정보를 덧붙인다.
    4. 자신이 수신해야하는 데이터라고 판단되면 인터넷 계층에 데이터를 전달한다.

=> 네트워크 어댑터가 처리할 수 있는 형태로 데이터를 변환하고 인접한 장비나 컴퓨터까지 변환된 데이터를 전달한다.

     cf)  스위치 : 주변 장치까지 데이터를 전달하는 데 필요한 정보로 변경

# 07 통신규약과 프로토콜

* 프로토콜이란 : 컴퓨터와 컴퓨터가 통신할때 지켜야할 절차나 규약
    - 컴퓨터끼리 통신하려면 '어떤 절차에 따라 뭘 보낼것인가'와 같은 규칙이 필요
    - '전송이 잘 되지 않았을 때 어떻게 할 것인가'와 같은 대안도 정의되어 있음
  

  * TCP/IP는 프로토콜의 집합
  : TCP/IP는 하나의 프로토콜을 지칭하는 말이 아니라 인터넷에서 사용되는 각종 표준 프로토콜을 한데 모아 일컫는 말. 
    흔히 TCP/IP라고 부르는 이유는 TCP/IP 가 이들 프로토콜 중 가장 대표적인 프로토콜이기 때문이다. 각각의 개별 프로토콜을 일컫는 말이 아니라,
    인터넷 프로토콜의 집합의 의미로 굳이 구분해야할 때에는 TCP/IP 프로토콜 스위트(TCP/IP Protocol Suite)라고 부르거나 인터넷  프로토콜 스위트(Internet Protocol Suite)라고 부르면 됨

  * 대표적인 프로토콜
  
  @ 애플리케이션 계층
  - HTTP : 웹 페이지 데이터를 주고받음
  - HTTPS : 보안을 위해 웹 페이지 데이터를 주고받는 과정을 암호화함
  - POP3 : 서버에 보관된 수신 메일을 꺼내옴
  - SMTP : 메일을 송신함
  - FTP : 파일을 전송함
  - Telnet : 컴퓨터를 원격에서 제어함
  - SSH : 보안을 위해 컴퓨터를 원격에서 제어하는 과정을 암호화 함
  - SMB : 윈도우 컴퓨터와 파일을 공유함
  - DHCP : 컴퓨터에게 프라이빗 IP를 동적으로 할당함
  - DNS : 도메인 이름과 IP어드레스를 서로 변환함
  - SSL : 보안을 위해 통신과정에서 주고받는 데이터를 암호화 함

  @ 트랜스포트 계층
  - TCP : 애플리케이션의 데이터를 송수신하되 데이터의 정확한 전달을 중시함
  - UDP : 애플리케이션의 데이터를 송수신하되 데이터의 전송 속도를 중시함

  @ 인터넷 계층
  - IP : 패킷을 목적지까지 전달함
  - ICMP : IP의 통신오류를 전달함
  - IPsec : 패킷을 암호화하여 전달함

  @ 네트워크 인터페이스 계층
  - ARP : 네트워크 장비의 MAC 어드레스를 알아냄
  - 이더넷 : 일반 금속 케이블이나 광 케이블을 통해 데이터를 전달함
  - PPP : 사용자 인증 후에 원격지의 장비와 통신함


# 08 인터넷의 영향
: 과거의 컴퓨터 네트워크는 OS 벤더가 만든 OS 의존적인 네트워크 프로토콜들을 사용했었다. 오늘날의 컴퓨터 네트워크는 인터넷에서 범용적으로 사용되는 TCP/IP 프로토콜을 사용한다.

 * 인터넷의 특징
   인터넷은 TCP/IP 라는 프로토콜 집합을 사용해서 전 세계의 네트워크들을 연결하고 통합한 세계 최대의 네트워크다. 인터넷에 연결되는 각 네트워크에는 각각의 네트워크 관리자가 있지만, 인터넷 자체를 중앙에서 관리하는 곳은 존재하지 않는다. 
   
* 인터넷의 영향을 받기전 과거의 컴퓨터 네트워크
   컴퓨터의 OS별로 독자적인 네트워크 프로토콜들이 있었는데 서로 다른 OS를 사용하는 컴퓨터끼리는 프로토콜이 맞지 않아 통신할 수 없었다.

* 인터넷의 영향을 받은 후 현재의 컴퓨터 네트워크
   오늘날은 개인용 컴퓨터가 연결되는 LAN을 시작으로 거의 모든 컴퓨터 네트워크가 TCP/IP를 기반으로 연결되어 있다. 그래서 통신하려는 두 컴퓨터의 프로그램이 동일한 프로토콜을 지원하고 있다면, OS나 통신 서비스 제공자가 다르더라도 큰 무리 없이 통신할 수 있다.



< 2장 네트워크 서비스와 애플리케이션 계층>

# 02 웹 페이지를 전송하는 HTTP

* 웹 페이지가 표시되기까지의 과정
  : 웹 브라우저가 웹 서버로 특정 웹 페이지를 요청하면 웹 서버가 해당 페이지의 내용을 HTML 형식으로 응답한다. 웹 브라우저는 이 데이터를 해석하여 웹 페이지 화면을 그린 후 사용자에게 보여준다.
    참고로, 이때 표시되는 웹 페이지에는 HTML 형식의 내용 외에도 화면 구성에 필요한 각종 파일들의 정보도 함께 포함되어 있다.

* HTTP 메세지
  : 클라이언트 PC의 웹 브라우저와 웹 서버는 HTTP(HyperText Transfer Protocol)라는 애플리캐이션 계층의 프로토콜을 사용한다. 통신과정에서 주고받은 정보들은 HTTP메시지라고 부르고,크게 요청과 응답의 두 가지 형태로 구분된다.

  => HTTP는 통신 시 정보를 한 번씩 주고받은 후 바로 끊는 형태로 처리된다. 이렇게 상태 정보를 저장하지 않는 통신 형태를 스테이트리스(stateless)라고 한다. HTTP는 대표적인 무상태 프로토콜이다.


# 03 웹서비스와 웹 애플리케이션

웹 페이지는 사용자의 입력을 받기 위해 양식 형태의 입력 필드를 제공. 웹 서버는 사용자의 입력을 받은 후 그 응답 결과를 다시 사용자에게 되돌려 주는데, 이때 응답 결과를 동적으로 만들어 주는 것이 웹서빈스나 웹 애플리케이션이다. 대표적인 웹 서비스의 예로는 검색 서비스나 온라인쇼핑몰등.

* 웹 서비스도 HTTP메시지로 정보를 교환한다.
  
  - 웹 브라우저가 웹 서버에 웹 서비스를 요청하고 그 결과를 응답받는 것은 웹 브라우저가 웹 서버에 웹 페이지를 요청하고 응답 받는 것과 동작 방식상 큰 차이가 없다. 다만, 웹 브라우저가 웹 페이지를 요청하면 웹 서버가 미리 만들어 둔 정적인 HTML 파일의 데이터로 응답하는 반면, 웹 서비스를 요청하면 웹 서버가 결과를 미리 만들어 놓지 않고 서버 프로그램이 HTML데이터를 동적으로 만들어서 응답한다.
  
  => 웹 페이지와 웹 서비스의 차이는 미리 만들어둔 정적인 HTML 파일로 응답하느냐, 아니면 서버 프로그램이 요청 내용에 따라 동적으로 HTML 데이터를 만들어 응답을 하느냐의 차이

  * CGI와 서버 사이드 프로그램
   : 웹 서버에서 동작하는 프로그램을 서버 사이드 프로그램(server side program) 혹은 서버 측 프로그램이라고 부른다. 서버 측 프로그램은 HTTP 메시지를 주고받는다는 조건만 맞으면 구현 방법은 어떤 것이라도 상관 없기 때문에 Perl(펄), PHP, Python(파이썬), Ruby(루비) 등의 다양한 언어로 개발된다. 웹 초창기에는 웹 서버에서 이들 서버 측 프로그램을 실행하기 위해 CGI(Common Gateway Interface)라는 방식을 사용했다. 이후에는 CGI보다 응답 속도가 우수한 웹 서버 추가 모듕 형태로 동작하는 방식이 사용됐다.