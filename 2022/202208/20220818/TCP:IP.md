< TCP/IP >



# 05. 컴퓨터 네트워크와 계층 모델

: 컴퓨터 네트워크는 여러 개의 통신 계층이 조합된 형티로 구성된다.
2
* 계층 모델
  - 애플리케이션 계층 : 웹서비스, 이메일과 같은 서비스를 사용자에게 제공한다.
  - 트랜스포트 계층 : 애플리케이션 계층과 인터넷 계층 사이에서 데이터가 올바르게 전달되도록 중계한다.
  - 인터넷 계층 : 목적지의 IP 어드레스로 데이터를 전달한다.
  - 네트워크 인터페이스 계층 : 네트워크와 같은 하드웨어를 통해 데이터를 전달한다.

서비스를 제공하는 부분 : 애플리케이션 계층
통신기능을 담당하는 부분 : 트랜스포트계층, 인터넷 계층, 네트워크 인터페이스 계층

* 송신지
  - 애플리케이션 계층 : 한 계층만 보면 같은 계층끼리 데이터를 주고받은 것처럼 보인다.
  - 트랜스포트 계층 : 전송하기에 적합한 크기로 작게 쪼갠 후, 목적지의 프로그램을 식별할 수 있는 정보를 덧붙인다.
  - 인터넷 계층 : 수신측의 컴퓨터를 식별할 수 있는 정보를 덧붙인다.
  - 네트워크 인터페이스 계층 : 하드웨어에 신호를 전달하는 데 필요한 정보를 덧붙인다.

* 하드웨어를 통과하는 데이터의 형태  
  - 네트워크 인터페이스 계층의 헤더 : 유선 LAN에서 데이터를 보내는 데 필요한 정보
  - 인터넷계층의 헤더 : 목적지의 컴퓨터를 식별할 수 있는 번호
  - 트랜스 포트 계층의 헤더 : 데이터의 결합 순서와 이 데이터를 받을 프로그램을 식별할 수 있는 번호
  - 패킷의 실제 몸통에 해당하는 데이터 (작게 분할된 데이터)
  - 네트워크 인터페이스 계층의 트레일러

* 수신지
  - 애플리케이션 계층 : 수신된 데이터
  - 트랜스포트 계층 : 모든 데이터가 수신된 것을 확인하고 데이터들이 결합되면 목적지의 프로그램에게 전달된다.
  - 인터넷 계층 : 자신이 수신해야 하는 데이터라고 판단되면 이 데이터를 트랜스포트 계층으로 전달한다.
  - 네트워크 인터페이스 계층 : 헤더나 트레일러를 떼어내고 인터넷 계층으로 전달한다.

@ 헤더 : 데이터 앞에 덧붙이는 정보
@ 트레일러 : 뒤에 덧붙이는 정보

# 06 4개 계층의 동작방식

* 애플리케이션 계층 : 사용자가 실제로 체감할 수 있는 서비스를 제공하는 것
    예를 들어, 웹 브라우저와 웹 서버는 애플리케이션 계층에 속하는 프로그램이고, 이때 주고받은 데이터는 페이지를 요청하는 URL과 그 응답 결과로 전달되는 웹 페이지 데이터

    1. 보고싶은 웹페이지의 URL을 요청
    2. 웹 페이지의 HTML 데이터를 응답
    3. 응답으로 받은 HTML데이터를 해석하여 웹 페이지 형태로 표시

=> 데이터의 내용을 보고 그에 맞는 서비스를 처리하는 데 집중하고 데이터 전송에 대해서는 하위 계층에 위임함

* 트랜스포트 계층 : 애플리케이션 계층의 프로그램에서 전달받은 데이터를 목적지 애플리케이션 계층의 프로그램까지 전달하는 것
                데이터가 제대로 전달되지 않았을 때 재전송하는 것도 이 계층이 하는 일

    1. 어떤 프로그램들이 서로 통신을 해야하는 지에 대한 정보를 헤더에 기록
    2. 포트 번호를 확인하고 웨 서버에 데이터를 전달
    3. 요청을 보낸 프로그램을 목적지로 설정하여 응답 데이터를 전달

=> 목적지 컴퓨터의 프로그램에 데이터가 제대로 전달되도록 포트 번호 정보를 헤더에 붙이거나 떼어내는 일을 주로 함

* 인터넷 계층 : 데이터에 어드레스 정보를 덧붙여 목적지까지 무사히 전달하는 것
             인터넷 통신에서는 목적지 컴퓨터까지 도달할 수 있는 경로를 창아야 하는데, 이때 라우터라는 장비가 사용됨

    1. 통신하는 컴퓨터들을 식별할 수 있도록 어드레스 정보를 덧붙인다.
    2. 자신이 수신해야 하는 데이터라고 판단되면 트랜스포트 계층에 데이터를 전달한다
    3. 클라이언트 PC를 목적지로 설정하여 데이터를 전달한다
    4. 자신이 수신해야하는 데이터라고 판단되면 트랜스포트 계층에 데이터를 전달한다.

=> 인터넷에서 통신을 할때는 이어달리기를 하는 것처럼 데이터를 다음 네트워크로 전달하기 위해 라우터라는 장비를 사용함

      cf) 하드웨어 : 어드레스 정보를 보고 목적지로 데이터를 전달함

* 네트워크 인터페이스 계층 : 유선 LAN 어댑터나 무선 LAN 어댑터가 처리할 수 있는 형태로 데이터를 변환하고 이 데이터를 목적지까지 전달하는것 
                       물리적으로 인접하여 견결된 장비까지 어떻게 하면 데이터를 잘 전달할까에 초점을 맞춤

    1. 주변 장치까지 데이터를 전달하는 데 필요한 정보를 덧붙인다.
    2. 자신이 수신해야 하는 데이터라고 판단되면 인터넷 계층에 데이터를 전달한다
    3. 주변 장치까지 데이터를 전달하는 데 필요한 정보를 덧붙인다.
    4. 자신이 수신해야하는 데이터라고 판단되면 인터넷 계층에 데이터를 전달한다.

=> 네트워크 어댑터가 처리할 수 있는 형태로 데이터를 변환하고 인접한 장비나 컴퓨터까지 변환된 데이터를 전달한다.

     cf)  스위치 : 주변 장치까지 데이터를 전달하는 데 필요한 정보로 변경

# 07 통신규약과 프로토콜

* 프로토콜이란 : 컴퓨터와 컴퓨터가 통신할때 지켜야할 절차나 규약
    - 컴퓨터끼리 통신하려면 '어떤 절차에 따라 뭘 보낼것인가'와 같은 규칙이 필요
    - '전송이 잘 되지 않았을 때 어떻게 할 것인가'와 같은 대안도 정의되어 있음
  

  * TCP/IP는 프로토콜의 집합
  : TCP/IP는 하나의 프로토콜을 지칭하는 말이 아니라 인터넷에서 사용되는 각종 표준 프로토콜을 한데 모아 일컫는 말. 
    흔히 TCP/IP라고 부르는 이유는 TCP/IP 가 이들 프로토콜 중 가장 대표적인 프로토콜이기 때문이다. 각각의 개별 프로토콜을 일컫는 말이 아니라,
    인터넷 프로토콜의 집합의 의미로 굳이 구분해야할 때에는 TCP/IP 프로토콜 스위트(TCP/IP Protocol Suite)라고 부르거나 인터넷  프로토콜 스위트(Internet Protocol Suite)라고 부르면 됨

  * 대표적인 프로토콜
  
  @ 애플리케이션 계층
  - HTTP : 웹 페이지 데이터를 주고받음
  - HTTPS : 보안을 위해 웹 페이지 데이터를 주고받는 과정을 암호화함
  - POP3 : 서버에 보관된 수신 메일을 꺼내옴
  - SMTP : 메일을 송신함
  - FTP : 파일을 전송함
  - Telnet : 컴퓨터를 원격에서 제어함
  - SSH : 보안을 위해 컴퓨터를 원격에서 제어하는 과정을 암호화 함
  - SMB : 윈도우 컴퓨터와 파일을 공유함
  - DHCP : 컴퓨터에게 프라이빗 IP를 동적으로 할당함
  - DNS : 도메인 이름과 IP어드레스를 서로 변환함
  - SSL : 보안을 위해 통신과정에서 주고받는 데이터를 암호화 함

  @ 트랜스포트 계층
  - TCP : 애플리케이션의 데이터를 송수신하되 데이터의 정확한 전달을 중시함
  - UDP : 애플리케이션의 데이터를 송수신하되 데이터의 전송 속도를 중시함

  @ 인터넷 계층
  - IP : 패킷을 목적지까지 전달함
  - ICMP : IP의 통신오류를 전달함
  - IPsec : 패킷을 암호화하여 전달함

  @ 네트워크 인터페이스 계층
  - ARP : 네트워크 장비의 MAC 어드레스를 알아냄
  - 이더넷 : 일반 금속 케이블이나 광 케이블을 통해 데이터를 전달함
  - PPP : 사용자 인증 후에 원격지의 장비와 통신함


# 08 인터넷의 영향
: 과거의 컴퓨터 네트워크는 OS 벤더가 만든 OS 의존적인 네트워크 프로토콜들을 사용했었다. 오늘날의 컴퓨터 네트워크는 인터넷에서 범용적으로 사용되는 TCP/IP 프로토콜을 사용한다.

 * 인터넷의 특징
   인터넷은 TCP/IP 라는 프로토콜 집합을 사용해서 전 세계의 네트워크들을 연결하고 통합한 세계 최대의 네트워크다. 인터넷에 연결되는 각 네트워크에는 각각의 네트워크 관리자가 있지만, 인터넷 자체를 중앙에서 관리하는 곳은 존재하지 않는다. 
   
* 인터넷의 영향을 받기전 과거의 컴퓨터 네트워크
   컴퓨터의 OS별로 독자적인 네트워크 프로토콜들이 있었는데 서로 다른 OS를 사용하는 컴퓨터끼리는 프로토콜이 맞지 않아 통신할 수 없었다.

* 인터넷의 영향을 받은 후 현재의 컴퓨터 네트워크
   오늘날은 개인용 컴퓨터가 연결되는 LAN을 시작으로 거의 모든 컴퓨터 네트워크가 TCP/IP를 기반으로 연결되어 있다. 그래서 통신하려는 두 컴퓨터의 프로그램이 동일한 프로토콜을 지원하고 있다면, OS나 통신 서비스 제공자가 다르더라도 큰 무리 없이 통신할 수 있다.



< 2장 네트워크 서비스와 애플리케이션 계층>

# 02 웹 페이지를 전송하는 HTTP

* 웹 페이지가 표시되기까지의 과정
  : 웹 브라우저가 웹 서버로 특정 웹 페이지를 요청하면 웹 서버가 해당 페이지의 내용을 HTML 형식으로 응답한다. 웹 브라우저는 이 데이터를 해석하여 웹 페이지 화면을 그린 후 사용자에게 보여준다.
    참고로, 이때 표시되는 웹 페이지에는 HTML 형식의 내용 외에도 화면 구성에 필요한 각종 파일들의 정보도 함께 포함되어 있다.

* HTTP 메세지
  : 클라이언트 PC의 웹 브라우저와 웹 서버는 HTTP(HyperText Transfer Protocol)라는 애플리캐이션 계층의 프로토콜을 사용한다. 통신과정에서 주고받은 정보들은 HTTP메시지라고 부르고,크게 요청과 응답의 두 가지 형태로 구분된다.

  => HTTP는 통신 시 정보를 한 번씩 주고받은 후 바로 끊는 형태로 처리된다. 이렇게 상태 정보를 저장하지 않는 통신 형태를 스테이트리스(stateless)라고 한다. HTTP는 대표적인 무상태 프로토콜이다.


# 03 웹서비스와 웹 애플리케이션

웹 페이지는 사용자의 입력을 받기 위해 양식 형태의 입력 필드를 제공. 웹 서버는 사용자의 입력을 받은 후 그 응답 결과를 다시 사용자에게 되돌려 주는데, 이때 응답 결과를 동적으로 만들어 주는 것이 웹서빈스나 웹 애플리케이션이다. 대표적인 웹 서비스의 예로는 검색 서비스나 온라인쇼핑몰등.

* 웹 서비스도 HTTP메시지로 정보를 교환한다.
  
  - 웹 브라우저가 웹 서버에 웹 서비스를 요청하고 그 결과를 응답받는 것은 웹 브라우저가 웹 서버에 웹 페이지를 요청하고 응답 받는 것과 동작 방식상 큰 차이가 없다. 다만, 웹 브라우저가 웹 페이지를 요청하면 웹 서버가 미리 만들어 둔 정적인 HTML 파일의 데이터로 응답하는 반면, 웹 서비스를 요청하면 웹 서버가 결과를 미리 만들어 놓지 않고 서버 프로그램이 HTML데이터를 동적으로 만들어서 응답한다.
  
  => 웹 페이지와 웹 서비스의 차이는 미리 만들어둔 정적인 HTML 파일로 응답하느냐, 아니면 서버 프로그램이 요청 내용에 따라 동적으로 HTML 데이터를 만들어 응답을 하느냐의 차이

  * CGI와 서버 사이드 프로그램
   : 웹 서버에서 동작하는 프로그램을 서버 사이드 프로그램(server side program) 혹은 서버 측 프로그램이라고 부른다. 서버 측 프로그램은 HTTP 메시지를 주고받는다는 조건만 맞으면 구현 방법은 어떤 것이라도 상관 없기 때문에 Perl(펄), PHP, Python(파이썬), Ruby(루비) 등의 다양한 언어로 개발된다. 웹 초창기에는 웹 서버에서 이들 서버 측 프로그램을 실행하기 위해 CGI(Common Gateway Interface)라는 방식을 사용했다. 이후에는 CGI보다 응답 속도가 우수한 웹 서버 추가 모듕 형태로 동작하는 방식이 사용됐다.










   =========


   * GET 방식과 POST방식
    - HTML 입력 폼을 통해 HTML 요청ㅇ르 보낼 때 주로 GET 방식과 POST방식의 두 종류의 요청 방식을 많이 사용한다. 
    - 이들 요청방식은 각각 사용하는 용도와 특징이 다르기 때문에 웹 서비스의 기능에 따라 구분해서 사용해야함.
    
    * GET 방식 : 입력 폼의 내용이 요청 행에 포함된다.
         : URL의 '?' 문자 뒤에 입력 폼의 내용이 붙는다.
         : URL에 입력 폼의 내용이 포함되어 있어서 웹 브라우저의 '이전 페이지'버튼을 누르면 한 단계 앞의 페이지가 표시되어 정적인 웹 페이지처럼 다룰 수 있다.
         

    * POST방식 : 입력 폼의 내용이 메시지 바디에 포함된다.
              
   => GET방식이 정보를 요청하는 것과 달리, POST 방식은 정보를 저장하거나 변경할 때 사용하며 상대적으로 더 많은 데이터를 전송할 수 있다/
   => GET 방식처럼 입력 폼의 내용이 육안으로 쉽게 노출되지는 않지만, 전송한 메시지를 해석하면 내용이 노출되기 때문에 보안상 안전하다고 할 수 없다.

   * 웹 서비스의 사용성을 높여주는 AJAX
     : HTTP 메시지로 통신한다는 점에서는 일반적인 요청 방식과 비슷하지만, 요청을 보내는 주체가 브라우저가 아닌 자바스크립트라는 것에 차이가 있다.
     : 웹 브라우저가 웹 서버로 요청하는 것이 아니라, 자바스크립트로 작성된 프로그램이 웬 서버와 통신한다. 그리고 응답 결과로 받은 내용에 대해서는 웹 브라우저가 전체 페이지를 다시 그려 화면을 갱신하는 방식이 아니라, 자바 스크립트가 웹 페이지의 특정 부분에만 응답 받은 내용이 갱신되도록 처리한다. 
     : 사용자 입장에서는 전체 페이지를 다시 조회하지 않아도 되고, 서버의 응답을 바로 받아 상호작용할 수 있으므로 보다 자연스러운 서비스 이용과 보다 향상된 사용자 경험을 느낄 수 있다.

     ex) 구글 검색의 입력 필드는 입력 도중에 검색 키워드와 유사한 키워드 후보들을 표시한다.



# 04 세션을 유지하기 위한 쿠키
: HTTP는 기본적으로 요청과 응답하는 과정에서 상태 정보를 저장하지 않아 무상태 혹은 스테이트리스 프로토콜이라고 하며, 상태를 유지하면서 연속된 응답을 해야할 때 쿠키라는 기술을 사용한다.

* 쿠키로 세션을 유지한다
  - 쿠키(cookie) : 여러 건의 요청 처리를 동일한 사용자 접속 세션(session)으로 인식할 수 있도록 하는 것

   - 쿠키 사용 이유
     : HTTP는 무상태 프로토콜이기 때문에 요청과 응답을 한 번씩 주고받은 후에 통신이 끊어진다. 그래서 온라인 쇼핑몰에서 상품을 선택하고 구입 결정을 한 후에 결제화면으로 이동하는 것처럼 여러 단계의 흐름 처리를 할 때는 각 요청이 동일한 사용자가 보낸 것인지 다른 사용자가 보낸 것인지 판단하지 못한다. 이때 쿠키를 사용한다.

* 쿠키가 하는 일
  : 웹 브라우저는 응답받은 메시지에 'Set-Cookie:' 라는 문자열이 있는지 확인하고, 만약 있으면 그 내용을 로컬 디스크에 쿠키 형태로 저장한다. 

  쿠키 정보는 악용될 경우 보안 문제가 발생할 수 있기 때문에 이에 대비한 조치가 필요한데, 기본적을 ㅗ웹 브라우저가 이에 대한 방어책을 자체적으로 구현하고 있다.
     ex) 쿠키가 생성된 웹 서버와 동일한 도메인을 사용하는 웹 사이트에마 쿠키가 전송되도록 제한한거나, 이미 저장된 쿠키들이 있다면 유효기간을 확인하고 유효기간이 지난 것은 자동으로 폐기함.

* 쿠키를 사용해서 주고받는 정보
  기본적으로 각종 정보는 서버 쪽에 저장하는 것이 원칙이고, 동일한 사용자인지 확인하기 위한 세션ID등의 식별정보만 클라이언트 쿠키로 저장하도록 제한해야 한다.

     1. 사용자 계정명과 패스워드를 입력해서 로그인한다.
     2. 세션 ID를 발급한 후에 응답 메시지에 포한해서 보낸다.
     3. 세션 ID가 일치하므로 로그인된 사용자와 동일한 사용자로 간주한다.    

# 05 이메일
: 이메일을 송수신 할 때는 SMTP, POP, IMAP 와 같은 여러 프로토콜이 사용된다.

* 송신과 수신에 서로 다른 프로토콜을 사용한다.
  - 메일 발신자는 SMTP(Simple Mail Transfer Protocol)를 사용하여 수신자의 메일 서버로 메일을 보낸다.
  - 메일 수신자는 POP(Post Office Protocol)를 사용해서 메일 서버로부터 자신의 메일을 받아온다.

  * SMTP 동작방식 
    : SMTP 프로토콜은 클라이언트 PC가 메일 서버로 메일을 보낼때만 사용되는 것이 아니라, 발신자의 메일 서버에서 수신자의 메일 서버로 메일을 중계할 때도 사용됨.
    : HTTP 프로토콜과는 달리 상태를 가지는  스테이트풀(stateful)프로토콜이기 때문에 전송 종료 명령이 보내져야 통신을 종료함
    : 송신자, 수신자, 메일 정보를 순차적으로 전송한다.
    : 상태를 유지하는 프로토콜이기 때문에 종료 명령이 전달되기 전까지는 통신이 계속 유지된다.

  * 이메일을 수신하는 POP
    : 메일 서버에 저장된 메일을 확인할 때는 POP프로토콜을 사용함.
    : 메일을 수신하는 것 외에도 수신한 메일 건수나 용량 확인, 메일 삭제와 같은 처리에도 POP프로토콜을 사용함.
    : POP는 사용자 인증을 먼저 한 후에 메일과 관련된 통신을 시작한다. 
    
  * 서버에 메일을 보관하는 IMAP
    : IMAP 프로토콜은 클라이언트 PC가 메일을 수신하더라도 메일 서버에서 수신한 메일을 지우지 않고 보관하게 되어있다.
    : 이런 방식은 메일 저장 공간이 충분하지 않은 스마트폰 등의 휴대기기에서 많이 활용된다.

 # 06 PC끼리 파일 공유하기
 : 파일공유는 개인 컴퓨터에 공유 디렉터리를 만든 후, 그 안에 공유할 파일을 저장하여 여러 사람이 함께 활용할 수 있도록 만드는 서비스

 * 피어 투 피어(peer to peer) : 네트워크에 연결된 두 대의 컴퓨터가 클라이언트와 서버의 역할을 동시에 할 수 있어서 서로에게 서비스를 주거나 받을 수 있는 통신 방식

 * 피어 투 피어 통신
  : 개인 컴퓨터에서 많이 사용되는 파일공유는 공유에 참여하는 각각의 컴퓨터가 서로 서버가 되기도 하고 클라이언트가 되기도 하는 피어투피어방식을 사용한다.
  특별히 공유를 위한 서버를 별도로 준비할 필요가 없고 공유할 컴퓨터끼리 네트워크에 접속하기만 하면 되기 때문

  * 파일 공유 프로토콜은 OS마다 서로 다르다
   - 파일 공유 기능은 OS에 기본적으로 탑재
   - 윈도우에서는 SMB(Server Message Block) 사용
   - 맥 OS X 에서는 AFP(Apple Filing Protocol)사용
   - 다만, 최근에는 다른 OS의 프로토콜도 지원할 수 있게 되어 간단한 설정만으로 파일을 서로 공유할 수 있게 됨

# 07 파일을 전송하는 FTP
: 네트워크에 연결된 서버로 파일을 전송하기 위한 프로토콜

* 서버로 파일을 전송한다.
  : FTP(File Transfet Protocol)는 파일 전송 프로토콜. 주로 인터넷에 연결된 서버에 파일을 전송할 때 사용
  : 명령어를 사용해서 파일을 업로드하거나 다운로드하고, 디렉터리를 만들거나 파일을 삭제하기도함
  : 웹 서버로 웹페이지를 전송할 때 자주 사용

  * 데이터 커넥션과 컨트롤 커넥션
  - 데이터 커넥션 : 파일을 주고 받기위한 접속 형태 / FTP 명령을 보내기위한 접속
  - 컨트롤 커넥션 : 명령어를 보내기 위한 접속형태 / 파일 데이터를 주고 받기 위한 접속

# 08 원격지의 컴퓨터 제어하기 
: 원격지의 컴퓨터를 제어하는 방법으로는 CLI(Command Line Interface)와 같은 명령 프롬포트를 통해 명령어로 제어하는 방법과 GUI(Graphical User Interface)를 통해 제어하는 방법이 있다.

# 09 Voice over IP와 영상 스트리밍
: 인터넷에서 음성이나 동영상을 보낼 때는 데이터를 압축하거나 분할해서 보낸다.
   
   음성이나 동영상 데이터는 메일고 ㅏ같은 텍스트 형태희 정보에 비해 상대적으로 데이터 용량이 크기 때문에 통신의 신뢰성보다는 전송 속도를 우선하는 UDP를 사용하고, 전송 시에는 데이터를 압축하되 수신된 정보를 바로 재생할 수 있는 스트리밍기술을 사용한다. 

   * 클라이언트 서버 방식과 조합하기 
    : 음성이나 동영상을 주고받는 서비스는 중간에 서버를 경유하지 않고 컴퓨터나 스마트폰끼리 직접 통신하는 피어투피어 방식을 사용하는 것이 일반적이지만, 피어투피어 방식은 서로 통신할 상대를 찾는 것이 어렵기 때문에 우선 클라이언트 서버 방식으로 디렉터리 서버에 접속하여 상대를 찾은 다음, 상대방과 통화할 때 피어투피어 방식으로 직접 통신하는 하이브리드 방식도 많이 활용된다.

   * 동영상 공유 서비스가 사용하는 프로토콜
   : 음성이나 동영상을  처리하는 프로토콜은 아직 널리 보편화 된 것은 아니기 때문에 일부 네트워크 환경에서는 통신이 거부되는 경우가 종종 발생하는데 그래서 유튜브와 같은 동영상 공유 서비스에서는 동영상 프로토콜에서 사용할 데이터를 HTTP 메시지 않에 채워 넣는 기술을 사용한다.
    HTTP 라면 차단되는 경우가 거의 없으므로 더 많은 환경에서 차단없이 동영상을 서비스할 수 있다.


    < 3장 트랜스포트 계층>
    트랜스포트 계층의 대표적인 프로토콜
    - TCP : 웹이나 이메일과 같이 데이터가 정확하게 전달되어야하는 통신에 사용
    - UDP : VoIP나 동영상 스트리밍과 같이 전송속도가 빨라야 하는 통신에 사용

# 01 트랜스 포트 계층의 역할
: 트랜스포트 계층의 역할은 수신지의 애플리케이션에 데이터를 전달하는 것. 트랜스포트 계층에서 사용하는 대표적인 프로토콜로는 전송의 신뢰성을 중시하는 TCP와 전송속도를 중시하는 UDP가 있다.

* 역할 : 컴퓨터가 받은 데이터를 애플리케이션까지 전달하는것
* 포트번호로 애플리케이션을 구분 : 할당된 포트번호를 참고하여 데이터를 애플리케이션에 전달한다.
  
* 데이터의 정확한 전달을 중시하는 TCP 
   - 수신지의 통신환경에 맞춰 데이터 크기를 정하거나 연속된 데이터를 몰아서 보낼 개수를 정한다.
   - 도달하지 않은 패킷이 있다면 재전송을 요청한다.

* 데이터의 전송속도를 중시하는 UDP
  - 별다른 처리를 하지 않는 대신 전송속도가 빠르다.

# 02 포트번호
: 데이터를 어떤 애플리케이션의 어느 프로토콜로 전달할지에 대해서는 포트번호를 보고 판단한다.

* 포트번호는 컴퓨터 내부의 수신지를 표현한다.
  - 인터넷 게층에는 외부로부터 다양한 패킷들이 들어온다.
  - 트랜스포트 계층의 프로토콜들은 패킷의 포트 번호를 보고 어느 애플리케이션으로 그 패킷을 전달해야 하는지 알 수 있다.

* 포트번호 범위
  - 웰 노운 포트 (well-known ports) : 0~ 1023번 / 서버 프로그램이 수신 대기할 때 사용하는 포트
  - 레지스터드 포트(registered ports) : 1024~49151번 / 벤더가 할당받아 사용하는 포트
  - 다이나믹 포트(dynamic ports) : 49152~65535번 / 클라이언트 프로그램이 사용하는 포트
  
  : 세 종류는 IANA라는 단체가 관리한다.


  * 포트 번호와 IP 어드레스의 조합으로 상대방을 식별한다.
    : 서버는 수신 대기를 위해 같은 포트를 사용하는 반면, 접속을 요청한 클라이언트 측은 서로다른 IP 어드레스와 포트번호를 사용한다. 써버는 이러한 클리아언트의 IP어드레스와 포트 번호를 조합하여 클라이언트를 식별할 수 있기 때문에 여러 클라이언트와 통신하는 상황에서도 혼선이 발생하지 않는다.
    접속이 완료되면 통신 상대의 IP 어드레스와 포트 번호를 기억해 둔 다음, 누구와 통신하는지를 있는지 식별하는 데 사용한다.

# 03 TCP가 정확하게 데이터를 전달하는 방법
: TCP 에는 데이터를 정확하게 전달하기 위한 다양한 기법이 적용되어 있다.

* TCP 가 하는일
  - TCP(Transmission Control Protocol)는 트랜스포트 계층의 포로토콜의 하나로서 웹이나 이메일, FTP와 같이 정확한 데이터 전달이 필요한 통신에 사용된다.
  - TCP는 데이터 전송에 신뢰성을 더하기 위해 데이터를 세그먼트(segment)라는 단위로 분할하고, 전송속도를 조정하며, 데이터가 제대로 전달되지 않았을 경우 재전손을 하게 된다.

* 통신 개시부터 통신 종료까지의 흐름
  : TCP 통신은 커넥션 연결에서 시작함. 커넥션을 맺는 과정은 3단계로 진행되기 때문에 이것을 3방향 핸드셰이크라고 부른다. 커넥션이 맺어지면 데이터를 전송할 수 있는 상태가 되고, 데이터 전송이 끝나면 커넥션을 끊는다.

  - 커넥션 연결하기(통신개시) : 통신을 시작하고 싶을 때 SYN을 ON으로 설정하고, 통신을 끝내고 싶을 때 FIN을 ON으로 설정한다.
  - 커넥션 연결끊기(통신종료) : ACK는 데이터가 잘 도착했는지 확인 응답을 하기 위한 플래그이다. ACK가 ON으로 설정된 패킷이 응답으로 돌아오지 않으면 제대로 전달되지 않은 것이라고 판단한다.

* 커넥션을 맺을 때 송신측과 수신측은 원활한 통신을 위해 사전에 일련번호와 최대 세그먼트크기(MSS, Maximum Segment Size)를 서로 합의하고 조율하는 과정을 거치게 된다.

* TCP는 일련번호와 응답확인 번호 정보를 따로 관리하면서 데이터가 제대로 송수신되는지 확인한다.

* 송신 측에서는 일정 시간이 지난 후에도 수신 측으로부터 응답이 오지 않을 경우 송신 실패로 간주하고 최근에 정상적으로 응답을 받은 후 부터 데이터를 재전송한다.

* 응답을 기다리지 않고 연속된 데이터를 몰아서 보내면 전송 속도를 더 빠르게 향상시킬 수 있다. 앞서 보낸 데이터에 대한 응답을 받은 후에 다음 데이터를 보내는 방식은 통신이 정상적으로 완료되기 까지 다소 많은 시간이 소요되기 때문

* 한번에 받을 수 있는 데이터 크기를 통보함
  - 수신측은 수신한 데이터를 일시적으로 보관할 수 있는 버퍼(buffer)라는 저장 영역을 가지고 있다. 수신측은 TCP 헤더의 윈도우 사이즈에 이 버퍼의 크기를 설정하고 송신측에 통보함으로써 어느정도의 크기까지 받아낼 수 있는지를 알려주게 된다.

* 흐름제어 (flow control) : 수신측은 도착한 패킷들을 버퍼에 쌓아두는 것과 동시에 이미 버퍼에 쌓인 데이터를 순차적으로 처리하게 된다. 수신측은 응답을 보낼때 윈도우 사이즈를 설정하여 현재 어느 정도 까지 수신할 수 있는지를 수시로 알려주게 된다.

* 버퍼가 가득 차면 윈도우 사이즈가 0으로 설정되고 데이터전송은 일단 멈춘다. 재개할 시점을 알기위해 송신측은 탐색패킷 혹은 윈도우 프로브(window probe)라는 패킷을 수신측에 보내고, 수신 측의 응답을 받아 현재 윈도우 사이즈를 확인한후에 전송 재개 여부를 결정한다. 

* 버퍼의 빈 공간이 있더라도 네트워크 경로가 혼잡한 상태라면 통신 속도를 낮춰야 하는 경우도 있다. 이때 인터넷 계층에 헤더 안에 혼잡 플래그가 on으로 설정되고, 송수신 측 양쪽이 ECE플래그와 CWR플래그를 사용해 통신 속도를 조절하게 된다.
    - 혼잡플래그는 인터넷 계층이 붙이는 IP헤더 안에 있다.



=====


# 04 UDP가 고속으로 데이터를 전달하는 방법
: VoIP나 동영상 스트리밍과 같이 데이터 전송의 신뢰성보다는 속도가 우선일 때는 UDP를 사용한다.

* UDP
  : UDP(User Dataprogram Protocol)는 TCP에 비해 상당히 간단한 프로토콜로서 단순히 데이터를 보내는 역할
  : 통신과정에서 데이터의 손실이 발생할 수 있는데, VoIP와 같은 음성 서비스나 동영상 스트리민 서비스는 일부 데이터가 누락되거나 왜곡되더라도 큰 문제가 없기 때문에 UDP를 주로 사용한다.

* TCP에는 없는 기능으로 UDP에는 하나의 패킷을 여러 수신지에 전달하는 브로드캐스트(broadcast)와 멀티캐스트(multicast)라는 기능이 있다. 브로드캐스트는 파일공유나 DHCP와 같이 네트워크 내의 여러 컴퓨터나 통신 장비와 정보를 교환할 때 사용된다.

* UDP를 애플리케이션 계층으로 둘러싼다.
  : 실시간 처리가 필요한 온라인 게임에서는 전송 속도가 우선인 UDP를 사용하긴 하지만, 데이터 전송의 신뢰성 역시 속도에 못지않게 중요하다. 이런 경우에는 애플리케이션 계층에서 흐름 제어(flow control)나 혼잡제어(congestion control)를 구현해서 부족한 신뢰성을 보완하게 된다.
  : TCP처럼 데이터의 전송의 신뢰성을 높이면서도 효율적인 처리로 속도 저하가 크지않게 만들어 준다.


# 05 netstat 명령으로 네트워크의 상태 확인하기 
: netstat는 컴퓨터의 접속 상태를 목록으로 확인할 수 있는 명령이다. 

* netstat 명령을 실행한다
  : TCP나 UDP는 웹 브라우저와 같은 애플리케이션 뒤에서 백그라운드(background)로 동작하기 때문에 사용자가 직접 육안으로 확인 가능한 결과를 출력하지는 않는다. 다만, netstat 명력으로 접속 상태를 확인하는 것은 가능한데, IP 어드레스나 프로토콜, 포트 번호 등의 목록을 조회할 수 있다.

  1. 명령 프롬포트 실행
  2. 'netstat -n'을 입력한 후에 'Enter'키를 누른다.
  3. 활성 상태의 TCP 접속 상태가 표시된다.


< 4장 라우팅과 인터넷 계층 >

# 01 인터넷 계층의 역할
: 인터넷 계층의 프로토콜은 수신지 컴퓨터가 아무리 멀리 있더라도 데이터를 전달 할 수 있도록 설계되어 있다.

* IP 어드레스 정보를 보고 데이터를 전달한다
  
  - 인터넷 계층 : 네튿워크 인터페이스 계층과 협력하여 다른 컴퓨터에게 데이터를 전달하는 역할
             : IP 어드레스 라고 하는 식별자 정보를 실마리로 데이터를 전달할 수 있는 체계를 제공하는 역할
  - 네트워크 인터페이스 계층 : 하드웨어에 의존해야하는 부분을 담당
  
  - 송신지, 수신지의 컴퓨터는 IP 어드레스로 식별할 수 있다.
  - IP 어드레스 정보를 보고 인터넷 어딘가에 연결된 컴퓨터를 찾아 데이터를 전달한다.
  - 라우터가 데이터를 전달한다. 

* 라우터와 라우팅
  - 라우터(router) : 데이터를 목적지까지 전달하기위한 네트워크 장비
                  : 네트워크와 네크워크를 연결하는 역할 / 하나의 라우터는 데이터를 목적지까지 전달하기 위해 다음 네트워크의 경로를 찾고, 그 경로상에 있는 라우터에게 데이터 전달을 위임하게 됨
  - 라우팅(routing) : 위의 과정은 최종 목적지를 찾기까지 연쇄적으로 반복되는데, 이렇게 라우터가 목적지의 경로를 찾아 나가는 과정을 라우팅이라고 함.

* IP 어드레스의 고갈을 방지하기 위한 대안 : 인터넷 보급이 급속도로 확산함에 따라 IP 어드레스 감소

   - 프라이빗 어드레스 : 사설 IP라고 불리며, 사무실이나 가정 내에서만 사용 가능한 IP 어드레스. 소속 네트워크 내부에서만 사용되므로 외부에서는 해당 IP 어드레스로 접근이 불가능하여 클라이언트 역할을 하는 컴퓨터가 주로 사용한다.
   - 퍼블릭 어드레스 : 공개 IP 등을 불리며, 인터넷에서 사용 가능한 IP 어드레스를 말함. 외부에서도 접근이 가능하고 서버 역할을 하는 컴퓨터가 주로 사용한다.

# 02 IPv4와 IPv6
: IPv4와 IPv6는 인터넷 계층에서 사용되는 중요한 프로토콜로, IP 어드레스를 결정 할 때 사용하는 비트의 길이가 서로 다르다.

- IPv4 (Internet Protocol Version 4) : 현재까지 컴퓨터의 어드레스를 지정할 때 가장 많이 사용되는 인터넷 계층의 프로토콜
                                     : 네트워크에 연결된 컴퓨터를 식별하기 위해 32비트의 IP 어드레스가 사용됨.

                                     : 헤더에 분할처리를 위한 다양한 필드들이 준비되어 있음
- IPv6 : 최근 128비트 어드레스로 만든 IPv6의 보급이 가속화 됨
       : IPv6는 애당초 라우터에서 데이터를 분할하지 않는 방식으로 사양이 만들어져 있어서 분할관련 필드는 옵션으로 되어있다.


# 03 IP 어드레스의 활용
: IP 어드레스는 주소 할당 방법에 따라 네트워크 부와 호스트 부로 나뉘어지고, 해당 주소에 대한 접근 범위에 따라 프라이빗 어드레스와 퍼블릭 어드레스로 구분된다.

* IP 어드레스는 네트워크를 표현하는 부분과 그 네트워크에 속한 호스트를 표현하는 부분으로 구성된다.
    - 호스트 : 네트워크에 연결된 컴퓨터나 네트워크 장비를 의미

* 어드레스 클래스
  : 하나의 IP를 어드레스 안에서 어디까지가 네트워크 부이고 어디까지가 호스트 부인지 미리 그 길이를 고정하여 결정해 둔 것
  : 어드레스 클래스 방식에서는 네트워크 부는 고정크기다.

  * 클래스 A의 어드레서는 한개의 네트워크당 약 1677만 대의 호스트의 어드레스를 할당할 수 있지만 실제로는 그렇게 많은 호스트를 하나의 네트워크에 연결하는 경우는 거의 없기때문에 많은 수의 어드레스가 사용되지 않고 낭비된다. 네트워크 부의 길이가 미리 정해져 있다.
       : 어드레스 클래스를 사용한 네트워크를 좀더 세분화하는 방법 : 서브넷 마스크 - 서브넷 마스를 사용하면 정해진 길이를 비트 단위로 유연하게 늘려서 쓰는 것이 가능
  * 서브넷 마스크의 한계 : 서브넷 마스크는 어드레스 클래스에서 미리 정해진 네트워크 부의 길이를 더 늘일 수는 있지 만 더 줄이지느 못한다. 그래서 서브넷을 도입하는 경우는 호스트 부가 긴 클래스 A나 B의 어드레스를 세분화해야 할 때 사용하는 것이 일반적이다.

* 프라이빗 어드레스 : 가정이나 사내에서 자유롭게 사용할 수 있는 어드레스
                : 인터넷에 연결해도 외부에서 접근할 수 없기 때문에 NAT(Network Address Translation)와 같은 어드레스 변환 기술을 사용해서 퍼블릭 IP 어드레스로 변환해주는 기법이 필요함

* 퍼블릭 IP 어드레스가 중복되어 있다면 데이터를 어디로 보내야 할지 알 수 없기 때문에 큰 혼란을 줄 수 있다.

* 인터넷 레지스트리
  - 퍼블릭 IP는 안터넷 레지스트리를 통해 인터넷 서비스 제공자들에게 할당되고 기업이나 가정은 인터넷 서비스 제공자가 확보한 IP 어드레스들을 빌려서 쓴다.

# 04 라우팅이란 
: 데이터를 목적지의 IP 어드레스까지 전달하려면 라우팅이라고 하는 경로 탐색 과정이 필요하다.

- 라우팅 : 인터넷에서 데이터가 목적지까지 제대로 전달되기 위해서는 라우터가 자신과 연결된 다른 라우터를 찾아나가면서 최종 목적지까지 연결되는 경로를 찾는 과정

* 라우팅 프로토콜 : 라우터끼리 누구랑 연결되어 있는지 정보를 교환한 후 경로 정보를 만들어 낸다.

* 자율시스템
  : 인터넷 서비스 제공자가 사용하는 규모가 큰 네트워크에서 몇 개의 네트워크를 하나로 묶어 자율시스템이라는 단위로 관리
  : 네트워크의 경로 하나하나를 찾아 다니며 이동하는 대신, AS와 같이 큰 덩어리의 접속 경로 단위로 이동하면 멀리 있는 커뮤터와도 더 빠른 속도로 통신할 수 있다.

# 05 라우터와 라우팅 프로토콜

* 라우터의 역할 : 네트워크 간의 패킷을 전달. 이때 연결하고 있는 각 네트워크에서 사용하는 IP 어드레스가 각각 하나씩 필요하며, 결과적으로 연결한 네트워크 개수만큼의 IP 어드레스를 여러 개 가지게 된다.
             : 목적지로 가기위한 경로는 라우팅 테이블을 보고 판단한다.
             : 연결된 네트워크별로 각각 서로다른 IP 어드레스를 가지고 있다.
             : 목적지 IP 어드레스를 보고 네트워크별로 패킷을 분류한 후 전달한다.
* 라우팅 테이블 : 목적지 호스트가 속한 네트워크 정보와 그 네트워크로 도달하기 위해 경유해야 하는 라우터의 정보가 들어있다.
             : 라우터는 내부에 저장하고 있는 라우팅 테이블이라는 정보를 활용하여 라우팅을 함
             : 고속도로의 도로 안내 표지처럼 목적지에 도착하기 위해서 어느 방향으로 가야하는지 알려주는 역할

* 정적 라우팅 : 네트워크 관리자가 직접 수작업으로 라우팅 테이블을 설정하는 방식
* 동적 라우팅 : 라우팅 프로토콜을 사용하여 자동적으로 경로 정보를 수집한 후 라우팅 테이블을 설정하는 방식

   => 네트워크 간의 접속 형태가 복잡하면 정적 라우팅으로 설정하는 것이 사실상 불가능하기 때문에 대부분은 동적 라우팅을 사용한다.

* 한 라우터의 라우팅 테이블에 목적지의 정복 ㅏ없다면 해당 라우터보다 더 ㅁ낳은 정보를 가지고 있는 기본 라우터 혹은 디폴트(default)라우터에게 물어보게 된다. 이 디폴트 라우터 정보는 각 라우터마다 정적으로 설정되어 있다.

* 동적 라우팅 알고리즘
  -  거리 벡터형 : RIP(Routing Informaiton Protocol) 프로토콜이 사용하는 방식
              : 목적지까지의 거리를 살펴보고 짧은 경로를 선택하는 방식
  - 링크 상태형 : OSPF(Open Shortest Path First) 프로토콜이 사용하는 방식
             : 네트워크의 통신 상태 정보를 맵(map)으로 관리하면서 상태가 가장 좋은 경로를 선택하는 방식
             : 복잡하고 변화가 잦은 네트워크 구성에 적합
  - 경로 벡터형 : 이들 위에 자율 시스템 AS간의 통신에서 사용됨

* AS(자율시스템) 안에서는 주로 링크 상태형인 OSPF를 사용한다. 다만, 링크 상태형은 네트워크 규모가 커지면 맵 정보를 처리하는 부하가 커질 수 있다. 따라서 네트워크를 몇 개의 영역으로 분할한 후 각 영역별로 맵을 따로 만드는 방식을 사용한다.
       : 접속 확인을 하고 경로 정보를 서로 교환하면서 모든 라우터가 같은 맵 정보를 가지도록 한다.


* AS 끼리는 경로 벡터형인 BGP(Border Gateway Protocol)가 사용됨. 경로 벡터형은 경로의 거리뿐만 아니라 경로 도중에 경유하는 AS 정보도 포함하여 경로 정보를 만든다.
    - 경로 정보에 AS 정보를  추가하여 전달하다 보면 최종적으로는 모든 라우터의 경로를 파악할 수 있게 된다.

# 06 네트워크 오류를 통보하는 ICMP
: 데이터 전송 중에 오류가 발생하면 ICMP 프로토콜로 통보한다.

* ICMP의 동작방식
  - ICMP(Internet Control Message Protocol)프로토콜은 데이터 전송 중에 문제가 생길경우 장애 상황을 통보하기 위해 사용된다.
       : ICMP패킷은 IP 헤더에 타입이나 코드와 같은 ICMP 메시지를 덧붙인 형태이다.

  - 라우터 요청 메시지 : 장비가 네트워크에 연결될 때 라우터를 찾기 위해 보내는 메시지(RS, Router Solicitation)
  - 라우터 광고 메시지 : 라우터 정보 요청에 대한 응답으로 라우터 정보를 모내는 메시지(RA, Router Advertisement)

# 07 어드레스 변환
: 프라이빗 IP 어드레스를 할당받은 호스트와 퍼블릭 IP 어드레스를 할당받은 호스트는 기본적으로 서로 통신을 하지 못한다. 하지만 어드레스 변환 기술을 사용하면 둘 간의 통신이 가능해진다.


* 네트워크 어드레스 변환(NAT)의 동작 방식
  : 가정이나 사무실의 네트워크에서는 보통 프라이빗 IP 어드레스를 사용한다. 이 주소는 내부에서 사용하는 가상의 주소라서 인터넷에 연결된 퍼블릭 IP 어르레스를 사용하는 서버와의 통신은 불가능하다.
    이때, 네트워크 어드레스 변환(NAT, Network Address Translation)기술이 사용됨

    - 라우터 : IP 어드레스를 변환했다는 것을 기억해둔다
    - 송신할 때는 송신지의 프라이빗 IP 어드레스를 라우터의 퍼블릭 IP 어드레스로 바꿔서 데이터를 보낸다
    - 수신할 때는 라우터의 퍼블릭 IP 어드레스를 송신지의 프라이빗 IP 어드레스로 다시 바꿔 보낸다.

* NAT 에서 발생할 수 있는 제약사항
  - NAT은 단순히 IP어드레스를 변환할 뿐  몇 가지 상황에서 제약이 발생할 수 있다.

    1. 내부의 여러 호스트가 공교롭게 같은 포트 번호를 사용하고 있다면 라우터는 이 요청에 대한 응답을 어느 호스트에게 되돌려 보내야 하는지 포트만 보고 판단하지 못한다.
    2. 내부에서 보낸 요청에 대한 응답은 받을 수 있지만 외부에서 일방적으로 보낸 데이터는 NAT 범위 안에 있는 호스트로 전달되지 않는다.

* 네트워크 어드레스 포트 변환(NAPT, Network Address Port Translation)
  : NAT의 포트 번호 충돌을 막기 위해 만들어진 방식
  : IP 어드레스뿐만 아니라 포트번호도 함께 변환한다. 내부 네트워크에서 프라이빗 IP를 사용하는 여러 호스트가 같은 포트 번호를 사용하고 있다면, 외부와 통신할 때 포트 번호가 충돌나지 않도록 변환해서 요청을 보낸 호스트를 구분할 수 있도록 한다.
   
     - 송신할 때 : 포트 번호를 바꿔 넣는다
     - 수신할 때 : 송신할 때 정보를 참고하여 포트 번호를 다시 되돌려 놓는다.
     - 포트 번호를 보고 요청을 보낸 호스트를 식별할 수 있다.


* 외부에서 접속이 가능하게 하는 방법
    - 메시지의 자동 확인
         : 사용자가 직접 요청한 것은 아니지만 내부에서 외부로 자동으로 정보를 요청하고 응답을 받는 방식

    - 포트 포워딩(port forwarding) : LAN안에 웹 서버나 FTP 서버를 운영하면서 외부로 이 서비스를 공개해야 할때 라우터의 특정 포트번호로 통신이 들어오면 내부의 특정 서버에 전달되도록 설정할 수 있는 방법

# 08 도메인명
: IP 어드레스는 긴 숫자 형태로 표현되기 때문에 사람이 알아보기 어렵다. 그래서 상대적으로 사람이 다루기 쉬운 도메인명을 대신 사용할 수 있다.

* URL에서 호스트명을 제외한 부분이 도메인명이지만, 호스트명을 포함한 전체를 도메인명으로 부르기도한다.

* 도메인 명에 대응하는 IP어드레스 정보가 알고싶다면 DNS 서버에게 물어보면 된다. 다만 사전에 컴퓨터나 라우터에 DNS 서버의 IP어드레스가 등록되어 있어야한다.

* 도메인명은 계층 구조 형태를 마침표로 구분하여 표현한다. 가장 뒤에 나오는 'kr'이나 'com'과 같은 도메인이 상위 도메인에 해당하고, 최상위 도메인 혹은 탑 레벨 도메인이라고 부른다. 탑 레벨 도메인의 하위 도메인은 2단계 혹은 서브 도메인이라고 부른다.

* DNS 서버의 계층 구조
  : DNS 서버는 자신이 담당하는 영역에 대한 도메인명을 관리하게 되는데, 이렇게 도메인명 데이터를 직접 관리하는 DNS 서버를 DNS 콘텐츠 서버라고 부른다

* DNS 서버의 종류
  - 콘텐트 서버(content server) : 도메인명을 관리
  - 캐시 서버(cashing server) : 질의에 응답하기 위함 
                            : DNS 캐시 서버는 루트 네임 서버부터 순차적으로 질의하게 되고, 질의 결과로 IP 어드레스를 알게 되면 그 내용을 요청한 클라이언트에게 응답하게 된다. 한번 질의한 내용은 캐시로 보관되게 때문에 이후 같은 질의가 들어오면 콘텐트 서버까지 가지 않고 바로 IP어드레스를 알려줄 수 있다.
      => 각 DNS 서버는 IP 어드레스를 알고 있는 하위 DNS 서버의 정보를 알려주는데, 이 과정을 반복하다 보면 최종적으로 목적지 주소를 알고 있는 DNS로 도달하게 된다.

      * hosts 파일 : 인터넷 초창기에는 호스트 명과 IP 어드레스를 매핑하기 위해 텍스트 파일 형태인 hosts 파일을 사용해서 IP 어드레스 변환을 했었다. 오늘날의 OS에도 이 흔적은 남아있어서 DNS에 등록되기 전의 서버나 DNS에 들록할 수 없는 서버에 접근해야할 경우 hosts 파일방식을 사용하기도 한다.
             - 정식 운영 전이고 개발 중인 서비스를 테스트할 때나 새 버전을 출시하기 전에 내부 테스트를 해야할 때 이 방법이 많이 활용된다. 테스트할 클라이언트 개수가 많아 hosts파일을 배포하기 어렵거나 hosts파일 자체를 변경하기 어려운 경우는 사설 DNS를 구성하는 방법을 이용하기도 한다. 




==================



* 도메인명은 퍼블릭 IP 어드레스와 마찬가지로 ICANN에서 관리한다. 그래서 사용하고 싶은 도메인이 있다면 등록 기관에 신청해야만 인터넷에서 사용할 수 있다.


# 09 IP 어드레스를 자동으로 할당하는 DHCP
; DHCP는 네트워크에 속한 호스트들에게 IP 어드레스를 자동으로 부여해 사람이 직접 IP를 설정하고 관리하는 수고를 덜어준다.

* DHCP(Dynamic Host Configuration Protocol) : 새로운 호스트가 네트워크에 연결되면 사용하고 있지 않은 IP 어드레스를 자동으로 할당한다.
             : TCP/IP 가 제대로 동작하기 위해서는 네트워크에 속한 각 호스트의 IP 어드레스가 중복되지 않아야 한다. 네트워크의 호스트들에 대해 IP어드레스를 할당하고 중복되지 않게 관리하는 작업을 사람이 직접해야 할 경우 상당히 번거로운데 이것을 자동으로 해준다.
             : 가정용 토고속 인터넷 라우터는 대부분 DHCP 서버 기능을 가지고 있어서 컴퓨터를 연결하면 바로 프라이빗 IP 어드레스가 할당된다.
             : 공공장소의 무료 와이파이 역시 DHCP로 IP어드레스를 할당하는 방식을 사용하고 있다.

* IP 어드레스 할당 방법 :
     1. 신규 호스트는 네트워크의 모든 호스트에게 브로드캐스트 방식으로 DHCP 발견 메시지를 보낸다.
     2. 이 메시지를 받은 DHCP 서버가 사용가능한 IP어드레스를 알려주는 방식으로 자동할당이 이루어진다.
         단, 이때의 신규호스트는 아직 IP 어드레스가 할당된 상태가 아니라서 DHCP 서버가 신규 호스트에만 선택적으로 IP 어드레스 정보를 알려주진 못한다. 그래서 DHCP 서버도 브로드캐스트 방식으로 네트워크 내의 모든 호스트에게 사용 가능한 IP 어드레스를 알려주게 된다.

# 10 ipconfig 명령과 ping 명령
: ipconfig는 사용 중인 컴퓨터의 IP 어드레스를 확인할 때 사용하고, ping은 통신하려는 상대가 접속 가능한 상태인지 확인할 때 사용한다. 

* ipconfig : 이 명령을 사용하면 컴퓨터에 할당된 IP 어드레스나 서브넷 마스크와 같은 정보를 확인할 수 있다.

* ping : 지정한 IP 어드레스로 ICMP 타입 8번 메시지를 보내는 명령
       : ICMP 타입 8번 메시지는 에코(echo)를 요청하는 것으로, 송신자가 수신자에게 메시지를 보낸 후 수신자가 자신이 받은 메시지를 다시 송신자에게 되돌려 보내라는 의미
       : 에코 요청을 받음 수신자는 응답으로 ICMP 타입 0번 메시지를 보내는데, 이 메시지는 에코 응답에 해당한다. 이렇게 에코 요청과 응답이 오가면 상대방이 통신이 가능한 상태인지 확인할 수 있게 된다.


# 11 tracert 명령으로 통신경로 확인하기
: tracert는 목적지 컴퓨터까지 통신하면서 통과한 경로를 표시하는 명령

* tracert : 인터넷에서는 라우터와 라우터의 연결을 따라 데이터가 전달되는데, 그 경로를 표시할 수 있는 것
      cf) 맥 OS X 나 리눅스에서는 traceroute 명령을 사용

      : ping과 마찬가지로 ICMP 타입 8번에 해당하는 에코요청을 보내는데, 이때 IP 헤더의 생종기간을 1에서 시작해서 하나씩 증가시키면서 여러 번 보내게 된다. 목적지에 닿기 전에 패킷의 생존 기간이 경과하면 라우터에서 ICMP 타입 11번에 해당하는 시간 초과 메시지가 되돌아 오는데, 이 정보를 이용해서 경유한 라우터들의 목록 정보를 만들 수 있다.

# 12 nslookup 명령으로 IP 어드레스 알아내기
: nslookup 명령은 DNS 서버에게 도메인명을 주고 IP 어드레스를 물어보거나 거꾸로 IP 어드레스를 주고 도메인명을 물어볼 때 사용한다.

* 도메인명으로 IP 어드레스 알아내기
    1. 'nslookup 도메인명'을 입력한 후에 'Enter'키를 누른다
    2. 질의를 받은 DNS 서버가 표시된다.
    3. 도메인 명에 연결된 IP 어드레스가 표시된다.

  => 정방향조회 (forward DNS query) : 도메인명을 주고 IP 어드레스를 알아내는 방법

* IP 어드레스로 도메인명 알아내기
    1. 'nslookup IP 어드레스'를 입력한 후에 'Enter'키를 누른다
    2. 'nslookup IP 어드레스'를 입력한 후에 'Enter'키를 누른다

* MX 레코드 살펴보기
  : DNS 서버에 등록된 정보에는 도메인명(호스트명)과 IP 어드레스를 연결한 A레코드 외에도 메일 어드레스를 위한 MX 레코드도 있다.
  'nslookup -type=mx 도메인명'을 실행하면 레코드 정보를 확인할 수 있다.



  < 5장 하드웨어와 네트워크 인터페이스 계층 >

  # 01 네트워크 인터페이스 계층의 역할
  : 네트워크 인터페이스 계층은 하드웨어를 제어하고 이와 연결된 다른 기기까지 데이터를 전달한다.

  * 다양한 하드웨어를 네트워크에 연결한다.
  - 네트워크 인터페이스 계층 : 네트워크의 하드웨어를 제어하는 부분
                       : 하드웨어들을 제어하면서 상위의 인터넷 게층이 하위의 하드웨어 동작에 대해서는 신경쓰지 않고 동작할 수 있도록 만들어주는 것이 역할
            - 하드웨어 : 네트워크 어댑터, LAN 케이블, 광케이블 등을 포함
            - 데이터 링크 계층 : OSI 참조 모델에서 프로토콜과 같이 소프트웨어와 관련된 부분
            - 물리계층 : 하드웨어와 관련된 부분


* 네트워크 인터페이스 계층의 프로토콜
   - PPP : 전화 회선을 사용해서 원격지와 접속한다. / 원격지의 장비에 사용자 계정과 패스워드로 인증한 후에 통신한다.
   - 이더넷 : 동축 케이블이나 UTP 케이블을 사용
   - ARP : IP 어드레스 정보를 이용하여 목적지의 MAC 어드레스를알아냄


* 네트워크에 연결되는 하드웨어
  : 네트워크 통신에 사용되는 하드웨어들은 장비 간의 접속 방식이나 신호를 주고받는 방식 등이 다양한데, 이러한 내용은 각종 사양이나 규정에 정의되어 있다.

  - 유선 LAN : 전압의 변화를 이용해서 신호를 전달함
  - 무선 LAN : 전파를 이용해서 신호를 전달

* 네트워크 인터페이스 계층과 하드웨어와의 관계
  : 트랜스토프 계층과 인터넷 계층에서 사용되는 TCP/IP는 특정 하드웨어에 의존하지 않도록 설계되어 있다.
  : 반면, 네트워크 인터페이스 계층은 하드웨어와 떼려야 뗄 수 없는 관계다. 그래서 이더넷과 같은 기술에서는 소프트웨어 사양과 하드웨어 사양이 함께 존재한다.


# 02 MAC 어드레스
: 네트워크 장비에 부여된 식별번호

* 네트워크 어댑터(NIC, Network Interface Card)에는 MAC(Media Access Control) 어드레스라고 하는 식별번호가 부여되어 있다.
  이 식별번호는 제조사가 제조 단계부터 붙이는 것으로, 퍼블릭 IP 어드레스와 비슷하게 전 세계의 네트워크 장비들이 서로 구분될 수 있도록 할당받는다.

  : 네트워크 어댑터나 무선 LAN, 클라이언트 장비, 무선 AP 장비들은 제조 과정에서 고유한 MAC주소를 할당 받는다.
  : 이더텟으로 데이터를 전송할 때는 패킷에 목적지의 MAC어드레스 정보를 설정한다.

* MAC 어드레스는 유선 LAN의 이더넷이나 무선 LAN 외에도 단거리 통신에 사용되는 불루투스와 같은 다양한 데이터 통신에서 활용된다. 
* 프레임(frame): 네트워크 인터페이스 계층이 보내는 데이터 , 이 프레임 안에 송신지와 수신지의 MAC 어드레스 정보가 들어간다.

* IP 어드레스와 MAC 어드레스
  - 유사점 : 역할 - 데이터를 전달할 목적지를 가리킨다는 점
  - 차이점 : IP 어드레스는 최종 목적지가 한번 설정되면 전송 과정 중에 변경되지 않는다.
          : MAC 어드레스는 전송과정 중에 통신 경로상에 다음 장비의 어드레스로 교체된다. MAC 어드레스는 최종 목적지가 아니라 바로 다음 목적지를 가리킨다.

# 03 이더넷
: 현재 가장 많이 사용되는 유선 LAN의 규격, 기술이 발전함에 따라 점점 더 많은 데이터를 고속으로 처리할 수 있게 개선되고 있음

: 유선 LAN은 통신 장비끼리 케이블로 연결하게 되는데, 이때 이더넷(Ethernet)이라는 규격 사용

* 프리앰블은 프레임의 시작을 알린다. 
  : 수신 측의 네트워크 어댑터는 전압의 높납이나 변화하는 신호를 받아 0과 1의 디지털 신호로 복호화한다. 이때 전압이 변화하는 타이밍에 맞춰 신호를 분석하려면 어디부터가 시작인지 기준점을 알아야 한다. 그래서 프레임 앞부분에는 프리앰블(preamble)이라고 하는 패턴을 두어 신호의 시작을 알 수 있도록 만들어져 있다.

* 케이블의 종류
  : 100BASE-TX와 같이 규격 표기방법에서 앞에 나오는 숫자는 전송 속도를, BASE는 신호의 변조 방식을, 마지막의 알파벳은 케이블의 종류를 의미

# 04 네트워크 허브
: 이더넷에서는 L2, L3 스위치와 같은 네트워크 허브를 중계 기기로 사용한다.

* 네트워크 허브의 동작방식
  : 유선 LAN에서는 너트워크 허브라는 장비에 케이블을 연결해서 네트워크를 구성한다. 일반 가정에서는 인터넷 서비스 업체에서 임대한 초고속 인터넷 라우터를 사용하는 것이 일반적인데, 이 단말기에는 네트워크 허브 기능이 내장되어 있다. 네트워크 허브에는 리피터 허브, L2 스위치(스위칭 허브), L3 스위치 등이 있다.

  허브 : '바퀴의 중심 축'
  네트워크 허브 :네트워크의 중심 역할

* L2 스위치 (스위칭 허브): 접속된 상대를 식별함

 : L2는 OSI 참조 모델의 데이터 링크 계층을 의미, TCP/IP 모델에서는 네트워크 인터페이스 계층에 해당함
 : 포트에 연결된 각 호스트의 MAC 어드레스를 기억해 두었다가 통신할 당사자 간에만 데이터를 전달하기 때문에 통신 과정에서 다른 호스트가 보내는 패킷 신호와의 충돌을 피할 수 있다.
 : MAC 어드레스를 활용하여 통신을 보다 효율적으로 할 수 있다.

* L2 스위치가 통신하는 방식
  : L2 스위치를 사용하면 통신 회선이 통신 당사자 간에만 독립적으로 만들어지기 때문에 여러 통신이 동시에 이루어지더라도 패킷 충돌이 발생하지 않는다.
  : 수신지의 MAC 어드레스를 확인한후에 수신측의 LAN포트에만 신호를 보낸다.
  : LAN포트가 독립적으로 구성되어 있어서 동시에 여러 신호를 보낼 수 있다.

  * 브로드케스트 도메인(broadcst domain) : 수신지의 주소가 브로드캐스트 어드레스일 때 데이터가 전달되는 범위를 의미
   
   : 그래서 L2 스위치로 네트워크를 구성하였다면 네트워크 전체가 브로드캐스트 도에인이 된다. 하지만 네트워크에 연결된 호스트의 수가 많을 경우, DHCP나 OS 파일 공유와 같은 브로드캐스트 통신이 자주 사용되면 네트워크 내의 대량의 패킷이 발생해서 망이 혼잡해질 수도 있다.

* L3 스위치 : 대규모 사무실에 적합
  
  : OSI 참조모델중 네트워크 계층에 해당, TCP/IP 모델에서는 인터넷 계층의 기능까지 수행할 수 있는 네트워크 장비

  - 대표적인 기능 : VLAN(Virtual LAN) : LAN을 몇 개의 가상적인 네트워크로 분할해서 통신 효율을 높이기 위해 사용
                                   : VLAN을 구성하면 브로드케스트 패킷을 VLAN 내의 호스트 범위로만 제한하여 전달할 수 있다.
                                   : 같은 장비의포트에 연결되어 있어도 서로 다른 네트워크처럼 구성할 수 있다.
                                   : VLAN별로 서로다른 IP 어드레스를 가지는 네트워크를 만들 수 있다.
                                   : 통신 방식은 L2스위치와 같다. 라우터처럼 라우팅을 하면서 네트워크를 넘나들 수 있다.


 # 05 무선 LAN
 : 전파를 통신 매개체로 사용하여 네트워크를 구성

 * 무선 LAN의 통신 방식
  : 전파를 이용해서 네트워크를 구성하는 무선 LAN의 정식 규격명은 IEEE 802.11
  : 무선 LAN에서는 다른 통신 장비가 전파를 발신하고 있지 않은 것을 확인한 후, 통신을 시작하는 CSMA/CA(Carrie Sense Multiple Access with Collision Avoidance)라는 방식을 사용

* 무선 LAN의 프레임 구조
  : 통신할 때 주고받는 데이터를  프레임이라고 부름
  :  무선 LAN의 프레임에는 MAC 어드레스 필드가 4개나 되는데, 무선 LAN끼리 통신하는 경우와 무선 LAN뒤에 유선 LAN이 연결되는 경우 등에 따라 MAC 어드레스 정보가 할당되는 방식이 달라진다.

* MAC 어드레스 정보의 설정방식
  : 무선 LAN의 통신에는 송신지와 수신지 사이를 무선 AP가 중계하게 된다. 그래서 프레임에는 송신지와 수신지의 MAC 어드레스 외에도 무선 AP의 MAC 정보도 들어간다.


# 06 ARP(Adress Resolution Protocol)
: IP 어드레스 정보를 이용하여 해당 장비의 MAC 어드레스를 알아내는 프로토콜이다

* IP 어드레스로 MAC 어드레스 알아내기
  : 이더넷이나 무선 LAN으로 데이터를 보내려면 수신 측의 MAC 어드레스를 알고 있어야 한다. 이때 필요한 것이 ARP
    1. 송신 측 방비는 요청 패킷에 수신 측의 IP 어드레스를 설정한 후 네트워크 전체에 브로드 캐스트한다.
    2. 이 요청을 받은 호스트들 중 수신지의 IP어드레스가 자신의 IP 어드레스와 동일한 장비는 자신의 MAC 어드레스를 응답 패킷에 설정하여 응답하게 된다.
    3. 송신지 장비는 수신지 장비의 IP 어드레스 정보를 사용하여 MAC 어드레스도 알 수 있게 된다.

* ARP 헤더
  : MAC어드레스를 물어보는 송신지의 어드레스 정보와 MAC 어드레스를 알 수 없는 목적지의 어드레스를 담을 수 있는 필드가 있다.
  - 수신지 : 송신지가 보낸 ARP요청패킷을 받는 곳(이 경우 브로드 캐스트 어드레스)
  - 목적지 : IP 어드레스는 알고 있지만 MAC어드레스를 알지 못하는 곳(target)을 의미

  : 헤더 내의 오퍼레이션 코드가 1인 경우는 요청을 의미하고, 2인 경우는 응답을 의미한다.


# 07 FTTx와 xDSL
: 가정이나 사무실에서 인터넷 서비스 제공자까지의 통신에는 광섬유 케이블을 사용하는 FTTx나 금속 케이블을 사용하는 xDSL이 사용된다.

* 광섬유 케이블을 사용하는 FTTx
  : 광섬유 케이블에 레이버 빛을 쏘아 통신하는 광섬유 회선은 수 km 떨어진 원거리에서도 고속 통신이 가능하다. 예로 일반 가정까지 광 회선이 들어와 인터넷 서비스를 제공하는 방식인 FTTH(Fiber To The Home)이다. 
  : 광 회선이 어디까지 들어오느냐에 따라 명칭이 조금씩 달라지는데, 이를 통틀어서 FTTx 라고 부른다.

* 인터넷 서비스 제공자에서 가입자까지 접속하는 방법
  - 점유형 : 인터넷 서비스 제공자에서 가정까지 한 개의 케이블로 연결된다.
  - 공유형 : 여러개의 신호를 한 개의 케이블로 보낸다 -> 광 신호를 분기한다 -> 자신에게 보내진 신호만 수신한다.

* 금속 케이블을 사용하는 xDSL
  
- 금속 케이블을 사용하는 통신 회선 : ADSL(Asymmetric Digital Subscriber Line)- 가입한 서비스에 따라 통신 속도가 크게 차이남,
                              VDSL(Very high bitrate Digital Subscriber Line)
  => 통신 방식이나 속도, 거리에 따라 몇 가지 규격으로 구분되는데, 일반적으로 이들을 모두 통틀어서 xDSL이라고 부른다.

* ADSL : 전화회선을 이용한다
       : 전화에서 사용하지 않는 높은 주파수로 디지털 신호를 전송한다.
       : 주파수별로 신호를 분기하거나 합친다.
       : 다운로드가 더 빠르다.
* VDSL : 옥외배선에 사용된다.
       : 인터넷 서비스 제공자까지는 원거리에도 고속 통신이 가능한 FTTx로 연결한다.
       : 각 방까지 VDSL로 배분한다.


# 08 PPP와 PPPoE
: PPP - 멀리 떨어진 컴퓨터끼리 접속하기 위한 프로토콜 / 이더넷에서 사용 가능한 형태는 PPPoE라고 함.

* PPP(Point to Point Protocol) : 원격지에 있는 컴퓨터를 일대일로 연결하기 위한 프로토콜
   1. 접속 : 모뎀으로 통신이 가능하게 되어있다.
   2. 인증 : 사용자 계정과 패스워드를 교환한다.
   3. 통신 : 통신에 사용할 프로토콜이나 어드레스를 서로 맞춘다.
   4. 종료 : 통신이 끝나면 종료한다.
   
   => 원격지에 있는 상대와 통신하기 때문에 통신하기로 한 상대가 맞는지, 어떤 방법으로 통신을 할지 등에 대한 정보를 서로 교환하고 확인이 끝난 후에 통신을 시작한다.

* PPPoE(PPP over Ethernet)
  : ADSL이나 FTTx에서는 이더넷 프레임을 사용하는데, 이더넷에는 접속, 인증, 종료와 같은 절차가 없다. 그래서 이더넷을 사용하여 PPP 통신을 할 경우 이더넷의 프레임 안에 PPP헤더를 넣은 PPPoE라는 프로토콜을 사용한다.

  : PPPoE에서는 PPP에 의한 접속시 디스커버리 스테이지라고 부르는 단계를 거쳐 PPPoE세션을 생성한다.

# 09 arp명령으로 MAC 어드레스 알아내기
: arp 명령을 이용하면 컴퓨터에 캐시된 IP 어드레스와 MAC 어드레스를 확인할 수 있다.



< 6장 보안 >

# 01 네트워크와 보안

: 네트워크에서 발생할 수 있는 보안 위협으로는 정보유출, 사용자 신분사칭, 데이터 위변조와 같은 형태가 있다.

* 정보유출에 대한 방어책으로 데이터 암호화가 있다.
  : 암호화된 데이터는 제 3자에게 유출되었다고 하더라도 내용을 식별할 수 없다. 암호화를 할 때에는 열쇠 역할을 하는 키(key)가 사용되는데, 키의 관리 방식에 따라 크게
  공유 키 암호화, 공개 키 암호화의 두가지 방식이 있다.

* 전자인증서 : 사용자가 본인 자신이라는 것을 증명한다.
* 전자 서명 : 데이터가 위변조되어 있지 않다는 것을 증명한다.

# 02 공유 키와 공개 키

* 하나의 키로 암호화와 복호화를 하는 공유 키 암호화
  : 암호화는 데이터를 이해하기 어렵게 만드는 과정을 의미하고, 보안을 위해 할 수 있는 기본 기술 중 하나. 이때 단순히 암호롸를 하여 읽기 어렵게 만드는 것으로 끝나는 것이 아니라 그 내용을 다시 원상태로 만들어 읽을 수 있어야하는데 그 과정을 복호화라고 한다. 
  : 암호화와 복호화를 아무나 하지 못하도록 하기 위해서는 비밀번호 같은 것을 사용하는 데, 이것을 키(key)라고 한다.
  : 공유 키 암호화 방식에서는 하나의 키를 사용해서 암호화도 하고 복호화도 한다.

* 공유 키 암호의 제약 사항
- 장점 : 공유 키 암호화 방식은 처리 방식이 간단하고 암호화와 복호화하를 하는 속도가 빠르다
- 단점 : 키를 안전하게 공유하는 방법이 어려울 수 있음

* 서로 다른 키로 암호화와 복호화를 하는 공개키 암호화
  
  - 공개 키 암호화 : 암호화를 하는 키와 복호화를 하는 키를 각각 만들어 한 세트로 관리하는 방식
                : 한쪽 키로 암호화한 것은 다른 한 키로만 복호화를 할 수 있는데, 두 개의 키 중 하나는 자신이 가지고 다른 하나는 통신 상대에게 나눠주게 된다
                : 이때 자신이 가지는 키를 비밀키 혹은 개인 키라고 하고, 다른 사람에세 공개하는 키를 공개 키라고 한다.
                : 개인키와 공개키를 한 개 세트로 구성하여 사용함

* 공개 키 암호화로 데이터를 주고받는 절차
  : 공개 키 암호로 데이터를 주고받을 경우, 먼저 상대에게 자신의 공개키를 사전에 전달해 둔다. 이후 상대는 데이터를 보내고 싶을 때 미리 받은 공개 키로 데이터를 암호화하여 보내는데, 이 데이터를 받을 쪽은 자신의 개인 키로 데이터를 복호화 할 수 있다.


# 03 전자 증명서와 전자 서명
: 전자 인증서 - 신분 사칭을 막을 때 사용, 전자서명 - 데이터 위변조를 막을 때 사용

* 전자인증서와 인증기관
  : 신분 사칭이나 메일 내용의 위변조를 막는 방법, 인증기관이 발행한 전자 인증서를 사용할 수 있다.

* 전자인증서를 사용하여 신분 사칭 막기
  : 발급받은 전자 인증서 안에는 공개 키와 인증기관의 전자 서명이 포함되어 있다. 이 전자 서명은 인증기관이 '이 공개 키는 이 소유자의 것이다'라는 것을 보증하는 역할을 한다.
  그래서 이 인증서를 가진 사람은 증명서에 포함된 공개 키를 사용해서 암복호화를 할 수 있게 된다.

* PKI(PKI, Public Key Infrastructure) : 공개 키 기반 구조
  : 공개 키 암호를 사용한 기술과 인증 기관에 의한 인증 시스템 전체를 통틀어 PKI라고 부름

- 주의할 점 : 공개 키 기반 구조가 보안 취약점의 많은 부분을 제거해 주기는 하나, 피싱 사이트로 인한 금융 사기나 컴퓨터 바이러스로 인한 보안 위협등에 대해서는 대응 가능한 영역이 아니기 때문에 막을 수 없어서 별도의 방어대책이 필요하다.

* 전자서명 : 데이터의 내용이 위변조되지 않았다는 것과 누가 보낸 것인지를 보증하는 역할

* 전자 서명을 만드는 방법 : 전자 서명을 만들기 우해서는 원본 데이터의 해시(hash) 값을 구한 후, 이것을 공개 키가 아닌 개인 키로 암호화하면 된다.
                    : 전자 서명을 만들 때는 반드시 개인 키로 암호화를 해야 한다.
      - 해시 : 특수한 알고리즘을 사용하여 데이터를 요약하는 것
            : 전자 서명에 사용되는 해시는 '원본 데이터가 똑같다면 해시 결과도 똑같다.', '해시 결과에서 원본 데이터를 복원할 수 없다'라는 특징을 가지고 있다.
             그래서 원본 데이터를 모르는 상태에서도 해시 값만 배교하여 원본 데이터의 일치 여부를 확인할 수 있다.


# 04 SSL / TLS
: 서버 인증서를 사용해서 서버와 클라이언트 간의 통신을 암호화한다.

- SSL(Secure Sockets Layer) 혹은 TLS(Transport Layer Security)는 서버와 클라이언트 사이의 통신 구간에 대해서 보안 수준을 높이기 위한 프로토콜
  : 인증 기관에서 발행된 서버 인증서를 사용해서 서버를 증명하고, 통신구간을 암호화 하며, 데이터의 위변조를 막는다.

* SSL/TLS를 사용한 보안 프로토콜 중 대표적인 것은 웹 서버에서 사용하는 HTTPS다. 그 외에도 FTP나 메일 프로토콜과 조합하기도 한다.


# 05 SSH(Secure Shell)
: 원격지의 컴퓨터를 안전하게 제어하기 위한 프로토콜
: 원격지에 있는 서버를 제어하기  위해 만들어진 telnet을 대체하는 프로토콜
: SSL과 마찬가지로 공개 키와 공유 키를 조합한 방식으로 통신을 암호화한다. 전자 인증서는 사용하지 않는 대신 서버나 클라이언트가 만든 공개 키를 사용
: 인증방식 - 패스워드 인증, 공개 키 인증 등 사용

* SSH의 공개 키 인증방식
  : 패스워드 인증 방식에서는 서버 측의 공개 키를 사용했지만, 공개 키 인증 방식에서는 클라이언트 측에서 공개 키를 만든 후에 그 키를 미리 접속할 서버에 등록해 두어 인증에 사용한다.
    사전에 공개 키를 등록해야하는 번거로움이 있지만, 이후부터는 원격 접속을 할 때마다 패스워드를 입력하지 않아도 된다.
      cf ) 서버와 클라이언트의 입장이 바뀌었다고 보면 이해하기 쉽다.


# 06 방화벽
: 오래 전부터 사용되어 온 기본적인 보안 기술 중 하나

- 네트워크에 연결된 서버는 외부에서의 접속을 허용해야 할 경우도 있지만, 해킹과 같은 악의적인 접근을 차단해야 할 필요도 잇다.
  이렇게 외부로부터의 접근을 차단할 때 사용하는 것 : 방화벽

- 방화벽은 허가된 통신 외에는 모두 차단하기 때문에 허용된 범위 내에서만 주의하고 잘 관리하면 서버를 보다 안전하게 지켜낼 수 있다.

- 시큐리티 홀(security hole) : 정보 유출과 같은 보안 취약점을 잠재한 프로그램상의 결함을 의미하고 그냥 방치해두면 언젠가는 악의적인 공격으로부터 뚫릴 수 있는 보안상의 구멍을 말함.
                          : 방화벽으로 필요한 통신만 열어두게 되면 이러한 시큐리티 홀에대해 주의해야 하는 범위가 상당수 줄어들어 보안사고를 예방하고 관리 측면에서 유리할 수 있다.

* 접속을 허가하고 차단하는 방법
  : 방화벽은 접속을 허가하거나 차단하기 위해 패킷내의 정보를 확인한다. 이렇게 방화벽이 접근을 제어하는 방법은 패킷 정보를 점검하는 계층에 따라 달라지며, 세 가지 유형으로 분류된다.

  - 패킷필터 : IP 어드레스나 포트 번호를 보고 제어한다.
  - 서킷 레벨 게이트 웨이 : 통신 쌍방을 직접 연결하지 못하게 하고 중간에서 통신을 중계한다.
  - 애플리케이션 게이트 웨이 : 애플리케이션 계층에서 다루는 URL이나 텍스트 정보를 보고 판단한다.



# 07 무선 LAN의 보안 
: 전파로 통신하는 무선 LAN에서는 도청을 막기 위한 보안 관련 사양이 규격으로 정해져 있다.
 
* 무선 LAN의 보안 프로토콜 
  : 무선 LAN은 전파로 통신하기 때문에 유선 LAN에 비해 상대적으로 도청에 대한 위험이 더 크다. 그래서 IEEE 802.11에는 암호화와 같은 보안기능에 대한 규격이 추가되어 있다.
  : WEP(Wired Equivalent Privacy)나 WPA(Wi-Fi Protected Access)등이 있고, 새로나온 기술일 수록 보안 강도가 더 높다.

* 스트림 암호화 방식과 블록 암호화 방식
  : 무선 LAN통신은 안전해야 하면서도 동시에 고속으로 처리되어야 한다. 그래서 암복호를 할 때 연산 처리 부담이 큰 공개 키 방식은 사용하지 않고 공유 키 방식을 사용함.
  : WPA이전에는 공유 키 방식의 하나인 스트림 암호하 방식이 사용되었었는데, WPA2에서는 더 강력한 블록 암호화 방식을 사용하고 있다.

* 패스프레이즈와 취약성
  : 무선 LAN의 보안 기능에서는 패스프레이즈(WEP에서는 WEP키)라고 부르는 사용자가 지정한 문자열과, 초기화 백터라고 부르는 조금씩 변하는 값을 조합하여 암호화를 위한 공유 키를 만든다.
  : 초기화 벡터가 바뀌면서 공유 키도 따라 바뀌기 때문에 암호화는 간단하고 처리속도가 빠른 반면에 복호화는 어렵게 만들어져 있다.
  : 통신할 때마다 공유 키를 바꾸기 때문에 해독이 쉽지 않다.
  : 단, 초기화 벡터의 길이가 짧으면 일정 시간 간격으로 같은 공유 키가 만들어질 수 있어서 암호 해독의 실마리를 줄 소지가 있다.
   - 같은 키가 생성되지 않도록 초기화 벡터가 조금씩 변한다.
   - 초기화 벡터가 변화하기 때문에 통신할 때마다 서로 다른 공유 키가 생성된다.

* 패스프레이즈와 초기화 벡터를 길게 만들기
  : 패스프레이즈오 초기화 벡터 값이 짧으면 암호화한 통신 데이터에서 키를 유추할 수 있다. 따라서 새로 나오는 보안 기능일수록 패스프레이즈와 초기화 벡터 값을 길게 사용하고 있다.
  : 패스프레이즈와 초기화 벡터를 길게 만들어 보안 강도를 높이고 있다.
  - 패스프레이즈와 초기화 벡터가 더 길어졌다.
  - 공유 키를 생성하는 처리 역시 보호화가 더욱 어렵게 개선 되었다.


# 08 VPN
: VPN을 사용하면 공중망에 연결된 원격지의 컴퓨터를 사설망에 연결된 것처럼 안전하게 사용할 수 있는 가상의 LAN 환경을 만들 수 있다.

* 원격지 거점과 연결된 안전한 LAN환경 만들기
  : 방화벽과 같은 각종 보안 기술을 적용하면 LAN내의 보안은 어느 정도 안전하게 구성할 수 있다. 단, 기업 환경에서는 본사와 지사와 같이 원격지와 통신을 해야 할 경우가 있는데, S/MINE이나 SFTP와 같은 보안 프로토콜을 하나하나 사용하는 것은 관리 측면에서 적지 않음 부담이 될 수 있다. 
  : 그래서 특정 구간 내의 통신 전체를 안전하게 만드는 기술이 필요한데, 이것이 바로 VPN(Virtual Private Network)이다.

  - 일반적인 통신에서는 주고 받은 데이터가 도청당할 수 있지만, VPN을 사용하면 거점간의 통신전체를 보호할 수 있다.

- 인터넷 VPN : 인터넷 상에서 암복호화를 하여 통신한다.
- 클로즈드 VPN : 인터넷과는 분리된 별개 회선을 사용한다. 

* VPN 에 사용되는 기술
  - VPN에 사용되는 프로토콜
     : IPSec(Security Architechture for Internet Protocol)이나 PPTP(Point to Point Tunneling Protocol)등이 있다.
     : 또한, IPSec에 L2TP(Layer 2 Tunneling Protocol)를 조합한 L2TP/IPsec도 폭넓게 사용되고 있다.
     
     : 패킷을 IP 헤더까지 통째로 암호화를 한 다음, 새로운 IP 헤더를 덧붙여 송신한다.

* VPN에서 사용자 인증하기
  : 가정에서 사용하는 컴퓨터나 스마트폰에서 VPN을 사용할 경우 사용자 인증이 필요하다. 하지만 IPsec에는 사용자별로 인증하는 기능이 없으므로 L2TP를 조합해서 사용한다.










