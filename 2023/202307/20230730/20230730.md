# Chapter 05. 하드웨어와 네트워크 인터페이스 계층

---

## 1. 네트워크 인터페이스 계층의 역할

: 네트워크 인터페이스 계층은 하드웨어를 제어하고 이와 연결된 다른 기기까지 데이터를 전달한다.

- 다양한 하드웨어를 네트워크에 연결한다.
    - 네트워크 인터페이스 계층 : 네트워크의 하드웨어를 제어하는 부분
        - 여기서 말하는 하드웨어 : 네트워크 어댑터나 LAN 케이블, 광 케이블 등을 포함한다
    - 이러한 하드웨어들을 제어하면서 상위의 인터넷 계층이 하위의 하드웨어 동작에 대해서는 신경쓰지 않고 동작할 수 있도록 만들어주는 것이 네트워크 인터페이스 계층의 역할

- 네트워크 인터페이스 계층의 프로토콜
    - 네트워크 인터페이스 계층의 프로토콜 중에는 전화 회선을 사용해서 원격지와 접속하는 PPP와 동축 케이블이나 UTP 케이블을 사용하는 이더넷과 같은 프로토콜이 있다.
    - 그 외에도 IP 어드레스 정보를 이용하여 목적지의 MAC 어드레스를 알아내는 ARP 같은 프로토콜도 있다.

- 네트워크 인터페이스 계층과 하드웨어와의 관계
    - 트랜스포트 계층과 인터넷 게층에서 사용되는 TCP/IP 는 특정 하드웨어에 의존하지 않도록 설계되어 있다.
    - 반면, 네트워크 인터페이스 계층은 하드웨어와 뗄레야 뗄 수 없는 관계다. 그래서 이더넷과 같은 기술에서는 소프트웨어 사양과 하드웨어 사양이 함께 존재한다.

## 2. MAC 어드레스

: MAC 어드레스는 네트워크 장비에 부여된 식별 번호

- 수신지 주소로 MAC 어드레스를 사용한다.
    - MAC 어드레스는 유선 LAN 의 이더넷이나 무선 LAN 외에도 단기간 통신에 사용되는 블루투스와 같은 다양한 데이터 통신에서 활용된다.
    - 네트워크 인터페이스 계층이 보내는 데이터를 프레임이라고 부르는데, 이 프레임 안에 송신지와 수신지의 MAC 어드레스 정보가 들어간다.

- IP 어드레스와 MAC 어드레스의 차이점
    - MAC 어드레스의 역할은 데이터를 전달할 목적지를 가리킨다는 점에서 IP 어드레스와 유사하다.
    - 다만, IP 어드레스는 최종 목적지가 한번 설정되면 전송 과정중에 변경되지 않지만
    - MAC 어드레스는 전송 과정 중에 통신 경로상에 다음 장비의 어드레스로 교체된다는 점이 다르다
        - MAC 어드레스는 최종 목적지가 아니라 바로 다음 목적지를 가리킨다.

## 3. 이더넷

: 현재 가장 많이 사용되는 유선 LAN의 규격으로, 기술이 발전함에 따라 점점 더많은 데이터를 고속으로 처리할 수 있게 개선되고 있다.

- 이더넷이란
    - 유선 LAN 은 통신 장비끼리 케이블로 연결하게 되는데, 이때 이더넷 이라는 규격을 사용한다.

## 4. 네트워크 허브

: 이더넷에서는 L2, L3 스위치와 같은 네트워크 허브를 중계 기기로 사용한다.

- 접속된 상대를 식별하는 L2 스위치
    - 포트에 연결된 각 호스트의 MAC 어드레스를 기억해 두었다가 통신할 당사자 간에만 데이터를 전달하기 때문에 통신 과정에서 다른 호스트가 보내는 패킷 신호와의 충돌을 피할 수 있다.

- 브로드캐스트 도메인
    - 브로드캐스트 도메인 : 수신지의 주소가 브로드캐스트 어드레스일 때 데이터가 전달되는 범위를 의미

- 대규모 사무실에 적합한 L3 스위치
    - 대표적 기능 : VLAN(virtual LAN)
        - 이 기능을 LAN 을 몇 개의 가상적인 네트워크로 분할해서 통신 효율을 높이기 위해 사용한다.
    - VLAN 을 구성하면 브로드캐스트 패킷을 VLAN 내의 호스트 범위로만 제한하여 전달할 수 있다.

## 5. 무선 LAN

: 무선 LAN은 전파를 통신 매개체로 사용하여 네트워크를 구성한다. 

- 통신 방식
    - 전파를 이용해서 네트워크를 구성하는 무선 LAN 의 정식 규격명은 IEEE 802.11이다.
    - 무선 LAN 에서는 다른 통신 장비가 발신하고 있지 않은 것을 확인한 후, 통신을 시작하는 CSMA/CA(carrie sense multiple access with collision avoidance)라는 방식을 사용한다.

## 6. ARP

: IP 어드레스 정보를 이용하여 해당 장비의 MAC 어드레스를 알아내는 포로토콜이다.

## 7. FTTx와 xDSL

: 가정이나 사무실에서 인터넷 서비스 제공자까지의 통신에는 광섬유 케이블을 사용하는 FTTx와 금속 케이블을 사용하는 xDSL 이 사용된다.

## 8. PPP와 PPPoE

: PPP는 멀리 떨어진 컴퓨터끼리 접속하기 위한 프로토콜이다.

: 이더넷에서 사용 가능한 형태는 PPPoE 라고 한다.

- PPP
    - 이 프로토콜은 다양한 통신 하드웨어를 지원하도록 설계되어 있어서 실제로 전화 회선을 이용하는 다이얼 업 PPP 나 이더넷을 사용하는 PPPoE 와 같은 형태가 있다.
    - PPP 는 접속, 사용자 인증, 통신, 중단과 같은 단계로 통신한다.

- 이더넷에서 사용하는 PPPoE
    - ADSL 이나 FTTx 에는 이더넷 프레임을 사용하는데, 이더넷에는 접속, 인증, 종료와 같은 절차가 없다.
    - 그래서 이더넷을 사용하여 PPP 통신을 할 경우 이더넷의 프레임 안에 PPP의 헤더를 넣은 PPPoE(PPP over Ethernet)라는 프로토콜을 사용한다.

- 디스커버리 스테이지
    - PPPoE 에는 PPP 에 의한 접속 시 디스커버리 스테이지라고 부르는 단계를 거쳐 PPPoE 세션을 생성한다.

## 9. ARP 명령으로 MAC 어드레스 알아내기

: ARP 명령을 이용하면 컴퓨터에 캐시된 IP 어드레스와 MAC 어드레스를 확인할 수 있다.